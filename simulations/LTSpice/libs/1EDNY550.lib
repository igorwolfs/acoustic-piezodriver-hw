******************************************************************************
*  v1.31 1EDNY550 PSpice simulation models
*  (C) Copyright 2019 Infineon Technologies. All rights reserved.
******************************************************************************
* This library contains models of the following INFINEON Gate Drivers: 
* 
* 1EDN6550 Single-channel non-isolated gate-drive IC with true differential input
* 1EDN7550 Single-channel non-isolated gate-drive IC with true differential input
* 1EDN8550 Single-channel non-isolated gate-drive IC with true differential input
* 1EDN9550 Single-channel non-isolated gate-drive IC with true differential input
*
******************************************************************************
*  Model performance :
*  - Static Electrical Characteristics and Dynamic Electrical Characteristics 
*    are modeled with the typical values from the datasheet.
*  - The thermal simulations represent an approximation of the actual thermal 
*    behavior of the device.           
******************************************************************************
* PINS: 
*  --------------------------------------------------------------------------
*  | NAME   | TYPE   | DESCRIPTION                                          |
*  --------------------------------------------------------------------------
*  | IN+    | IN     | Positive input                                       |
*  |        |        | connected to PWM output of controller via resistor   |
*  |        |        | (typically 33 kO)                                    |
*  --------------------------------------------------------------------------
*  | IN-    | IN     | Negative input                                       |
*  |        |        | connected to controller ground via resistor          |
*  |        |        | typically 33 kO)Inverting Input                      |
*  --------------------------------------------------------------------------
*  | GND    | INOUT  | Ground                                               |
*  --------------------------------------------------------------------------
*  | VDD    | IN     | Positive Supply Voltage                              |
*  --------------------------------------------------------------------------
*  | OUT_SNK| OUT    | Driver Output Sink                                   |
*  |        |        | low-impedance switch to GND (8 A / 0.35 O)           |
*  --------------------------------------------------------------------------
*  | OUT_SRC| OUT    | Driver Output Source          |
*  |        |        | low-impedance switch to VDD (4 A / 0.85 O)           |
*  --------------------------------------------------------------------------
*  | TAMB   | IN     | ambient temperature                                  |
*  |        |        |  - connect to this pin a voltage source with desired |
*  |        |        |  ambient temperature given in Celsius Degrees        |
*  --------------------------------------------------------------------------
*  | TJ     | OUT    | junction temperature                                 |
*  |        |        | - leave it open                                      |
*  |        |        | - the voltage level of this pin gives the junction   |
*  |        |        |  temperature at any time in Celsius Degrees          |
*  --------------------------------------------------------------------------
*  | TC     | OUT    | case temperature                                     |
*  |        |        | - the voltage level of this pin gives the case       |
*  |        |        |  temperature at any time in Celsius Degrees          |
*  --------------------------------------------------------------------------
*
******************************************************************************
* PARAMS:
*   THERMAL_MODEL - thermal network  ( package : 8-Lead SOIC )
*                 - default value = 1
*
*  --------------------------------------------------------------------------
*  | PARAM. NAME   | VALUE | DETAILS                                        |
*  --------------------------------------------------------------------------
*  | THERMAL_MODEL | 1     | JEDEC 51-12 two-resistor compact model thermal |
*  |               |       | network with added RthBA, RthCtopA             |
*  |               |       | resistances and thermal capacitances.          |
*  |               |       | The RthJB, RthJCtop, RthBA, RthCtopA and       |
*  |               |       | thermal capacitances calculated based on the   |
*  |               |       | RthJA 200�C/W thermal resistance from the      |
*  |               |       | datasheet and the thermal characteristics from |
*  |               |       | Infineon Package and Thermal Information       |
*  |               |       | pdso8_1 document.                              |
*  |               |       | The thermal resistance measured under board    |
*  |               |       | mounted and still air conditions.              |
*  |               ----------------------------------------------------------
*  |               | 0     | JEDEC 51-12 two-resistor compact model thermal |
*  |               |       | network with added RthCtopA                    |
*  |               |       | resistance and thermal capacitances.           |
*  |               |       | The RthJB, RthJCtop, RthCtopA and              |
*  |               |       | thermal capacitances calculated based on the   |
*  |               |       | RthJA 200�C/W thermal resistance from the      | 
*  |               |       | datasheet and the thermal characteristics from |
*  |               |       | Infineon Package and Thermal Information       |  
*  |               |       | pdso8_1 document.                              |
*  |               |       | The External board thermal model (RthBA and    |
*  |               |       | thermal capacitances) can be connected to      | 
*  |               |       | the TC pin of the model.                       |
*  --------------------------------------------------------------------------
*
******************************************************************************
* DISCLAIMER
*
* INFINEON�S MODEL TERMS OF USE
*  
*
* BY DOWNLOADING AND/OR USING THIS INFINEON MODEL (�MODEL�), THE USER
* (INCLUDING YOU) AGREES TO BE BOUND BY THE TERMS OF USE HERE STATED. IF USER
* DOES NOT AGREE TO ALL TERMS OF USE HERE STATED, USER SHALL NOT DOWNLOAD,
* USE OR COPY THE MODEL BUT IMMEDIATELY DELETE IT (TO THE EXTENT THAT IT
* WAS DOWNLOADED ALREADY).
*
* 1. SCOPE OF USE
* 1.1 Any use of this Model provided by Infineon Technologies AG is subject
*     to these Terms of Use.
* 1.2 This Model, provided by Infineon, does not fully represent all of the
*     specifications and operating characteristics of the product to which
*     this Model relates.
* 1.3 This Model only describes the characteristics of a typical product.
*     In all cases, the current data sheet information for a given product
*     is the final design guideline and the only actual performance
*     specification. Although this Model can be a useful tool to evaluate
*     the product performance, it cannot simulate the exact product performance
*     under all conditions and it is also not intended to replace
*     bread-boarding for final verification.
*
* 2. IMPORTANT NOTICE
* 2.1 Infineon Technologies AG (�Infineon�) is not and cannot be aware of the
*     specific application of the Infineon�s Model by User. However, Model may
*     from time to time be used by User in potentially harmful and/or life-
*     endangering applications such as traffic, logistic, medical, nuclear
*     or military applications or in other applications where failure of the
*     Model may predictably cause damage to persons� life or health or to
*     property (hereinafter "Critical Applications").
* 2.2 User acknowledges that Infineon has not specifically designed or
*     qualified the Model for Critical Applications that the Model may contain
*     errors and bugs and that User is required to qualify the Model for
*     Critical Applications pursuant to the applicable local quality, safety
*     and legal requirements before permitting or giving access to any such use.
*
* 3. CONFIDENTIAL INFORMATION
*     User shall treat ideas, concepts and information incorporated in the
*     Model, the documentation and the content of this Terms of Use (together
*     hereinafter "Confidential Information") confidential, not disclose it to
*     any third party unless otherwise agreed in writing between User and
*     Infineon, not use it for any other purposes than using the Model for
*     simulation and testing purposes only.
*
* 4. WARRANTY
* 4.1 User acknowledges that the Model is provided by Infineon under this Terms	       
*     of Use is provided free of charge and "AS IS" without any warranty or 	      
*     liability of any kind and Infineon hereby expressly disclaims any 		      
*     warranties or representations, whether express, implied, statutory or 	      
*     otherwise, including but not limited to warranties of workmanship, 		      
*     merchantability, fitness for a particular purpose, defects in the 		      
*     Model, or non-infringement of third parties intellectual property rights.	       
* 4.2 Infineon reserves the right to make corrections, deletions, modifications, 	      
*     enhancements, improvements and other changes to the Model at any time 	      
*     or to move or discontinue any Model without notice. 			      
* 										      
* 5. LIABILITY 									      
* 5.1 Nothing in this Terms of Use shall limit or exclude Infineon's liability 	      
*     under mandatory liability laws, for injuries to life, body or health,  	      
*     for fraudulent concealment of defects in the software, or in cases 		      
*     of Infineon's intentional misconduct or gross negligence. 			      
* 5.2 Without prejudice to Sections 5.1, in cases of Infineon's slight		       
*     negligent breach of obligations that restrict essential rights or duties 	      
*     arising from the nature of this Terms of Use in a way that there is a 	      
*     risk of non-achievement of the purpose of this Terms of Use or of an 	      
*     obligation whose observance User regularly may trust in and whereas		       
*     compliance with only makes proper execution of this Terms of Use 		      
*     possible, Infineon's liability shall be limited to the typically, 		      
*     foreseeable damage. 							      
* 5.3 Without prejudice to Sections 8.1 and 8.2, Infineon's liability under 	      
*     this Agreement shall be excluded in all other cases. 			      
* 										      
* 6. EXPORT REGULATIONS 								      
*     The User shall comply with all applicable national and international 	      
*     laws and regulations, in particular the applicable export control 		      
*     regulations and sanction programs. The User also agrees not to 		      
*     export, re-export or transfer any software or technology developed		       
*     with or using information, software or technology offered by Infineon, 	      
*     in violation of any applicable laws or regulations of the competent 	      
*     authorities. Further, the User shall neither use any products, 		      
*     information, software and technology offered by Infineon in or in 		      
*     connection with nuclear technology or weapons of mass destruction 		      
*     (nuclear, biological or chemical) and carriers thereof nor supply 		      
*     military consignees. 							      
* 										      
* 7. TERMINATION OF USE PERMIT 							      
*     If the User violates these Terms of Use, such User�s permit to use 		      
*     this Model terminates automatically. In addition, Infineon may 		      
*     terminate the User�s permit to use this Model at its discretion and 	      
*     at any time regardless of any violation of these Terms of Use. In 		      
*     any of the foregoing events, the User is obliged to immediately destroy 	      
*     any content that has been downloaded or printed from Infineon�s website. 	      
* 										      
* 8. MISCELLANEOUS 								      
* 8.1 These Terms of Use are subject to the laws of the Federal Republic 		      
*     of Germany with the exception of the United Nations on Purchase 		      
*     Contracts on the International Sale of Goods dated April 11, 1980 (CISG). 	      
*     The exclusive place of jurisdiction is Munich, Germany. 			      
* 8.2 Should any provision in these Terms of Use be or become invalid, the 	      
*     validity of all other provisions or agreements shall remain unaffected 	      
*     thereby.
* 
******************************************************************************

* ------------------------------------------------------------------------------
* ------------------------------------------------------------------------------

* 1EDNY550 Single Channel Gate Driver
*! Name: 1EDNy550
*! Version: 1.31-2019-05-13

*! Library references
*! Library name, version
*! Gate_Driver.lib, 2019-05-13

*! Change history of model
*! Version, Changes
*! 1.0-2018-10-31, base model creation	 
*! 1.2-2019-01-31, fixes for non zero GND levels	
*! 1.3-2019-04-16, Changed Rdiff from 1.5 GOhm� to 1.5 kOhm�, Diff. amp. gain from 4.5 to 10.333, 
*! Added extra output pins (STinH STinL) providing the normalized ON-threshold 515.15 mV and the normalized OFF threshold 454.54mV 
*! 1.31-2019-05-13,the missing D_Lim1 and D_Lim01 models were added

.PARAM dout_high= {5}

.SUBCKT 1EDN6550 OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc
+ Params: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
XU1   OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin 1EDNY550 
+ Params: THERMAL_MODEL={THERMAL_MODEL} YN= 6
+ RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2
.ENDS

.SUBCKT 1EDN6550_EXT OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin
+ Params: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
XU1   OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin 1EDNY550 
+ Params: THERMAL_MODEL={THERMAL_MODEL} YN= 6
+ RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2
.ENDS

.SUBCKT 1EDN7550 OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc
+ Params: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
XU1   OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin 1EDNY550 
+ Params: THERMAL_MODEL={THERMAL_MODEL} YN= 7
+ RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2
.ENDS

.SUBCKT 1EDN7550_EXT OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin
+ Params: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
XU1   OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin 1EDNY550 
+ Params: THERMAL_MODEL={THERMAL_MODEL} YN= 7
+ RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2
.ENDS

.SUBCKT 1EDN8550 OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc
+ Params: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
XU1   OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin 1EDNY550
+ Params: THERMAL_MODEL={THERMAL_MODEL} YN= 8
+ RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2
.ENDS

.SUBCKT 1EDN8550_EXT OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin
+ Params: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
XU1   OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin 1EDNY550
+ Params: THERMAL_MODEL={THERMAL_MODEL} YN= 8
+ RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2
.ENDS

.SUBCKT 1EDN9550 OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc
+ Params: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
XU1   OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin 1EDNY550
+ Params: THERMAL_MODEL={THERMAL_MODEL} YN= 9
+ RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2
.ENDS

.SUBCKT 1EDN9550_EXT OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin
+ Params: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
XU1   OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin 1EDNY550
+ Params: THERMAL_MODEL={THERMAL_MODEL} YN= 9
+ RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2
.ENDS

.SUBCKT 1EDNY550 OUT_SRC OUT_SNK VDD IN- GND IN+ Tj Tamb Tc STinH STinL STin   
+ PARAMS: THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
+ YN= 7 RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2 

.PARAM Ion= {3.661997E-03}
.PARAM Ioff= {3.161997E-03}
.PARAM DTcoff= {0.002}
.PARAM DTcon= {0.00350}
.PARAM Kiqin= {-0.085m/DOUT_HIGH}
.PARAM Kiddslope= {-0.004m/DOUT_HIGH}
.PARAM Kthrn= {1/3.3}
.PARAM Acl= {125m}

VIhmosA     48 OUT_SRC ; Current Arrow
VIlmosA     OUT_SNK 45 ; Current Arrow
VCIb1       40 GND ; Current Arrow
VS2         54 40 3
XD8         IN+ 23 D_Z_10_1N_0
XD5         GND 23 D_Z_10_1N_0
XD7         GND 24 D_Z_10_1N_0
XD6         IN- 24 D_Z_10_1N_0
XInput1     VM Neg IGND VLCM IAVDD NOut VDD POut Plus GND VICM Input1_0
EVCVS2      STin 0 VALUE = {V(POut,NOut)*KTHRN/ACL}
EVCVS1      STinH 0 VALUE = {V(Vthrh,0)*KTHRN}
EXT         STinL 0 VALUE = {V(Vthrl,0)*KTHRN}
XAND1       36 37 GDIA DPWR DGND AND2_P
+ PARAMS: DLH=0 DHL=0
Rdiff       32 33 1.5K 
GIb1        39 40 VALUE = {V(55,GND)*(1+(V(50,DGND)/DOUT_HIGH)*0.405+(200U+(V(50,DGND)/DOUT_HIGH)*70U)*V(TJ25,0))*2.514}
GPORO       GND Vbias VALUE = {LIMIT(I(VCIB1),0,100U*(-300U*V(TJ25,0)+1.01))}
R1          GND VICM 2K 
Rint21      42 Neg 81.82K 
Rint11      43 Plus 81.82K 
Cin1        43 42  85.987261F
Rfb1        43 NOut 1.0333MEG 
Rfb2        42 POut 1.0333MEG 
Rint1       32 43 100K 
Rint2       33 42 100K 
Cfb2        Neg POut  8.321616F
Cfb1        Plus NOut  8.321616F
C3          33 GND  15P
C2          GND 32  15P
Rd12        GND 33 1.0025K 
Rd11        32 GND 997.5 
Rd22        IN- 33 2.005K 
Rd21        IN+ 32 1.995K 
R22         OUT_SNK VlgA 10MEG 
XU14        VDD GND 35 DGND Tj VDD HYSTCOMP_THL_THR_TEMP_1EDNY550_0_0
+ PARAMS: VOUTH={DOUT_HIGH} VOUTL=0 ROUT=100 TDLH=10N TDHL=10N Y={YN} 
XQ2         45 VlgA GND GND VDD GND SWMOSN_1EDN7550_0_0
XU2 POut NOut Comp DGND Tj Vthrl Vthrh HYSTCOMPG_THLRF_TVIN_TEMP_1EDN7550_0 
+ PARAMS: VOUTH={DOUT_HIGH} VOUTL=0 ROUT=100 TDLH=14.8N TDHL=10.8N TRISE=1N
+ TFALL=1N
R2          TJ25 0 1K 
GTD25       0 TJ25 VALUE = {(LIMIT(V(Tj,0),-50,150)-25)*1M}
XU12        Tj Tamb 47 Tc 46 THERMALINJECTION4R_0
+ PARAMS: RTHJA25=165.1 RTHJCTOP25=79.9 RTHJB25=65.2 THERMAL_MODEL={THERMAL_MODEL} DC=1
+ CTJ=166.366396U CTB=57.3053M CTC=60.32U RTCA=21.551724K
XINV5       49 50 DPWR DGND DA_BUF_DP_0
+ PARAMS: DLH=0N DHL=0N OUT_LOW=0.0 OUT_HIGH=1.0 ROUT=1 COUT=0
XU17        35 37 DPWR DGND AD_BUF_DP_0
+ PARAMS: DLH = 0 DHL = 0
XU9         Comp 36 DPWR DGND AD_BUF_DP_0
+ PARAMS: DLH = 0 DHL = 0
XU15        GDIA 51 DPWR DGND INV_DP_0
+ PARAMS: DLH=0N DHL=0N
XINV1       52 53 DPWR DGND DA_BUF_DP_0
+ PARAMS: DLH=0N DHL=0N OUT_LOW=0.0 OUT_HIGH=1.0 ROUT=1 COUT=0
GIhonA      VhgA Vghmx VALUE = {IF(V(50,DGND)>0.5,V(57,0),0)}
GIlonA      Vglmx VlgA VALUE = {IF(V(53,DGND)>0.5,V(56,0),0)}
R1_2        VhgA VDD 10MEG 
GIhoffA     VDD VhgA VALUE = {IF(V(50,DGND)<0.5,2*V(57,0),0)}
XD4         Vghmx VhgA D_LIM01_0
XD3         VhgA VDD D_LIM01_0
XD1         GND VlgA D_LIM01_0
XD2         VlgA Vglmx D_LIM01_0
GIloffA     VlgA GND VALUE = {IF(V(53,DGND)<0.5,2*V(56,0),0)}
Rp2         VlgA GND 1G 
XU13        51 DGND 52 DPWR LEB_0
+ PARAMS: LEB=3.0N
XU8         GDIA DGND 49 DPWR LEB_0
+ PARAMS: LEB=3.0N
XQ1         48 VhgA VDD VDD VDD GND SWMOSP_1EDN7550_0
EPT         46 0 VALUE = {ABS(V(OUT_SNK,GND)*I(VILMOSA))+ABS(V(VDD,OUT_SRC)*I(VIHMOSA))}
GVSVghmx    GND Vghmx VALUE = {IF(V(Vbias,GND)>2.5,V(VDD,GND)-V(Vbias,GND)-V(Vghmx,GND),0)}
R10         Vghmx GND 1G 
R9          VDD Vglmx 1G 
GVSVglmx    Vglmx VDD VALUE = {IF(V(Vbias,GND)>2.5,V(VDD,GND)-V(Vbias,GND)-V(VDD,Vglmx),0)}
C1          Vbias GND  3P
R7          Vbias GND 43.8K 
XD21        VDD 39 D_LIM1_0
C4          39 GND  10P
R6          54 40 1MEG 
XD20        54 39 D_LIM1_0
GVCCS1      GND 55 VALUE = {(0.004M-KIDDSLOPE*(V(50,DGND)))*V(VDD,GND)+0.29M+KIQIN*(V(50,DGND))}
Rb3         55 GND 1 
Rpsrr1      39 40 10MEG 
R5          56 0 1 
GVCCS4      0 56 VALUE = {IF(V(Vbias,GND)>3.5,IOFF*(-DTCOFF*V(TJ25,0)+0.8),0)}
R4          57 0 1 
GVCCS3      0 57 VALUE = {IF(V(Vbias,GND)>3.5,ION*(-DTCON*V(TJ25,0)+1.1),0)}
XDPWR       0 DPWR DGND DIGIFPWR_NOOPNODE
+ PARAMS: VOLTAGE={DOUT_HIGH} REFERENCE=0 

.ENDS

.SUBCKT Input1_0 VM Neg IGND VLCM IAVDD NOut VDD POut Plus GND VICM
.PARAM EGdc= {0.200}
.PARAM Ndc= {0.20}
.PARAM RSdc= {1}
.PARAM Go13= {500u}
VS2         60 IGND 2.023158
VIvcvs3     60 63 ; Current Arrow
VIvs1       61 67 ; Current Arrow
VS1         67 IGND -1.927811
VdrophO1    IAVDD 69 731.044012M
VdroplO1    59 IGND 731.044012M
XD1         59 VB D_LIM1_RS100_0
R5          VICM GND 1T 
EVSVM       VM IGND IAVDD IGND  500M
EAVDD       IAVDD IGND VALUE = {LIMIT(5*(V(VDD,GND)-1.4),3.3,0)}
EGND        IGND 0 GND 0  1
XD6         61 62 D_LIMCM_0
XD5         62 63 D_LIMCM_0
XD3         61 64 D_LIMCM_0
GVCCS4      65 IGND VALUE = {I(VIVCVS3)}
R4          65 IGND 10MEG 
GVCCS3      66 IGND VALUE = {I(VIVS1)}
R3          66 IGND 10MEG 
GVCCS1      IGND 64 VALUE = {10U*(V(Plus,IGND)-V(64,IGND))}
GVCCS2      IGND 62 VALUE = {10U*(V(Neg,IGND)-V(62,IGND))}
R2          62 IGND 1T 
XD2         64 63 D_LIMCM_0
R1          64 IGND 1T 
EVCVS2      MCM 0 VALUE = {1- LIMIT((V(66,IGND)+V(65,IGND)),0,1)}
Ro110       VLCM Neg 1G 
Ro11        VLCM Plus 1G 
Go13        VM VB VALUE = {GO13*V(64,62)}
RGo13       0 0 500U 
XD4         VB 69 D_LIM1_RS100_0
Ro15        VM Neg 100G 
Ro12        Plus VM 100G 
Ro13        NOut VM 1 
Go11        VM NOut VM VB  1
Ro14        POut VM 1 
Go12        VM POut VB VM  1
Co19        VB VM  79.577472F
RCo19_RPAR  VB VM 1T
Ro19        VB VM 10MEG 
.ENDS

.SUBCKT D_Z_10_1N_0 1    2
D1 1 2  D_Z_10_1n
.MODEL D_Z_10_1n D( IS=1n N=1.0 BV=10.0 IBV=1.0m RS=10 XTI=0)
.ENDS

.SUBCKT HYSTCOMP_THL_THR_TEMP_1EDNY550_0_0 inp inm out gnd Tj VDD
+ Params: VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Y=7
*
*1EDN6550
GVthrH6 0 VthrH6 table {V(Tj,gnd)} = (-40.0338, 12.05, -20.0169, 12.08, 0, 12.1, 25.0845, 12.14, 50.1689, 12.16, 75, 
+12.17, 100.0845, 12.18, 124.9155, 12.18, 150, 12.175)
RVthrH6 0 VthrH6 1
GVthrL6 0 VthrL6 table {V(Tj,gnd)} = (-40.0338, 11.4, -20.2703, 11.42, 0, 11.45, 25.08446, 11.47, 50.1689, 11.49, 75, 
+11.5, 100.08446, 11.51, 124.9155, 11.512, 150, 11.513)
RVthrL6 0 VthrL6 1

*1EDN7550
GVthrH7 0 VthrH7 table {V(Tj,gnd)} = (-40.0338, 4.1697, -20.0169, 4.1767, 0, 4.1817, 25.0845, 4.1847, 50.1689, 4.1877, 75, 
+4.1897, 100.0845, 4.1897, 124.9155, 4.1897, 150, 4.1897)
RVthrH7 0 VthrH7 1
GVthrL7 0 VthrL7 table {V(Tj,gnd)} = (-40.0338, 3.8699, -20.2703, 3.8769, 0, 3.8829, 25.08446, 3.8899, 50.1689, 3.8929, 75, 
+3.8939, 100.08446, 3.8969, 124.9155, 3.8979, 150, 3.8989)
RVthrL7 0 VthrL7 1

*1EDN8550
GVthrH8 0 VthrH8 table {V(Tj,gnd)} = (-39.9616,7.9598, -19.9794,7.9852, 0.0001,7.9937, 24.8823,7.9937, 50.1159,7.9937, 
+74.9991,7.9937, 100.2327,7.9937, 125.1159,7.9937, 149.9991,7.9937)
RVthrH8 0 VthrH8 1
GVthrL8 0 VthrL8 table {V(Tj,gnd)} = (-40.1739,6.9905, -19.8431,7.0074, 0.1344,7.0116, 25.0176,7.0116, 49.9026,7.0201, 
+75.1381,7.0286, 100.0223,7.0328, 124.9045,7.0286, 150.1381,7.0286)
RVthrL8 0 VthrL8 1

*1EDN9550
GVthrH9 0 VthrH9 table {V(Tj,gnd)} = (-39.9616,14.75, -19.9794,14.78, 0.0001,14.8, 24.8823,14.85, 50.1159,14.87, 
+74.9991,14.89, 100.2327,14.9, 125.1159,14.9, 149.9991,14.89)
RVthrH9 0 VthrH9 1
GVthrL9 0 VthrL9 table {V(Tj,gnd)} = (-40.1739,14.25, -19.8431,14.27, 0.1344,14.3, 25.0176,14.35, 49.9026,14.37, 
+75.1381,14.39, 100.0223,14.4, 124.9045,14.4, 150.1381,14.39)
RVthrL9 0 VthrL9 1
*
.Param Rdel = {IF ( ((Tdlh > 1E-15)|(Tdhl > 1E-15)) & (Rout < 1), 1, Rout ) } 
.Param VoutM={(VoutH+VoutL)/2}

.Param Cout={Sqrt(Tdhl*Tdlh)/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt(Tdhl/(Tdlh+1p))}
.Param Rdhl={Tdhl/(Tdlh+1p)*Rdlh}

E_VTHH6 VTH_H6 0 VALUE { IF( Y<6.5, 1,0)* V(VthrH6) }
E_VTHH7 VTH_H7 0 VALUE { IF( Y>6.5 & Y<7.5, 1,0) * V(VthrH7) }
E_VTHH8 VTH_H8 0 VALUE { IF( Y>7.5 & Y<8.5, 1,0) * V(VthrH8) }
E_VTHH9 VTH_H9 0 VALUE { IF( Y>8.5, 1,0) * V(VthrH9) }
E_VTHH  VTH_H  0 VALUE { V(VTH_H6) + V(VTH_H7) + V(VTH_H8) + V(VTH_H9) }

E_VTHL6 VTH_L6 0 VALUE { IF( Y<6.5, 1,0) * V(VthrL6) }
E_VTHL7 VTH_L7 0 VALUE { IF( Y>6.5 & Y<7.5, 1,0) * V(VthrL7) }
E_VTHL8 VTH_L8 0 VALUE { IF( Y>7.5 & Y<8.5, 1,0) * V(VthrL8) }
E_VTHL9 VTH_L9 0 VALUE { IF( Y>8.5, 1,0) * V(VthrL9) }
E_VTHL  VTH_L  0 VALUE { V(VTH_L6) + V(VTH_L7) + V(VTH_L8) + V(VTH_L9) }

*Ethr thr gnd Value= { IF ( V(out,gnd) < {VoutM}, IF (Y < 7.5, V(VthrH7), V(VthrH8)), IF (Y < 7.5, V(VthrL7), V(VthrL8)) ) }
Ethr thr gnd Value= { IF ( V(out,gnd) < {VoutM}, V(VTH_H), V(VTH_L) ) }
Eout out gnd Value= { IF ( (V(inp,inm) > V(thr,gnd)) , VoutH + Rdlh*I(Eout) , VoutL + Rdhl*I(Eout)  ) }
Cout out gnd {Cout}
.ENDS

.SUBCKT SWMOSN_1EDN7550_0_0 D  G  S  B  Vdd Vss

Rs     S    Si   1.00m
Rg     G    Gi   1.0
Rd     D    Di   1.00m
Rb     B    Bi   1.00m

M1      Di1    Gi    Si    Bi    SWMOS  M=30 W=102u L=1u

.MODEL SWMOS NMOS (LEVEL=1 KP= 388.4787u  VTO=2.0239 LAMBDA=100m )
RDS Di1 Si 10e5

*Rd2     Di    Di1   195m TC=0m
Rd2     Di    Di1   11m TC=0m

Dbody   Bi   Di    DBODY
.MODEL DBODY  D(IS=8.41E-09 N=1.21)

Cgd     Gi    Di    {119.469021f}    
Cgs     Gi    Si    5p
Cds     Di    Si    5p
.ENDS  

.SUBCKT HYSTCOMPG_THLRF_TVIN_TEMP_1EDN7550_0 inp inm out gnd Tj VthrL VthrH
+ Params: VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Trise=1N Tfall=1N 
* Trise ->   90%*(VoutH-VoutL), Tfall -> 10%*(VoutH-VoutL)
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) } 
.Param Ro = {IF ( ((Trise > 1E-15)|(Tfall > 1E-15)) & (Rout < 1), 1, Rout ) } 
.Param VoutM={(VoutH+VoutL)/2}
.Param Tdmin= 1p
.Param Cdel={Sqrt((Tdelhl+Tdmin)*(Tdellh+Tdmin))/(0.693*(Rdel+1u))}
.Param Gdlh={Sqrt((Tdelhl+Tdmin)/(Tdellh+Tdmin))/Rdel}
.Param Gdhl={(Tdellh+Tdmin)/(Tdelhl+Tdmin)*Gdlh}
.Param Cout={Sqrt(Tfall*Trise)/(2.287*(Ro+1u))}
.Param Gr={Sqrt(Tfall/(Trise+Tdmin))/Ro}
.Param Gf={(Trise+Tdmin)/Tfall*Gr}
.Param Inv= {1}
.Param Acl= {125m}

EVthrH VthrH 0 table {V(Tj,gnd)} = (-40.0,1.65, 25.0,1.7, 150,1.8)
EVthrL VthrL 0 table {V(Tj,gnd)} = (-40.0,1.47, 0,1.5, 25.0,1.52, 150,1.62)

Rinp inp gnd 1G
Rinm inm gnd 1G
Gthr gnd thr Value= { IF ( Inv*(V(out,gnd) - VoutM) < 0, Acl*V(VthrH), Acl*V(VthrL) ) }
Rthr gnd thr 1
Gouti gnd outi Value= { IF ( (V(inp,inm) > V(thr,gnd)), (VoutH - V(outi,gnd))*Gdlh*(-0.0008*(V(TJ,gnd)-25) + 1), 
+(VoutL - V(outi,gnd))*Gdhl*(-0.0015*(V(TJ,gnd)-25) + 1) ) }
Couti outi gnd {Cdel}
Routi outi gnd 1G
Gtm gnd tm  Value= {1/(Abs(V(inp,inm)-V(thr,gnd)) + 1m)}
Rtm tm gnd {1}
Ctm tm gnd {Cdel*Rdel}

Gout gnd out Value= { IF ( Inv*(V(outi, gnd) - VoutM) > 0, (VoutH - V(out,gnd))*Gr, (VoutL - V(out,gnd))*Gf ) }
Cout out gnd {Cout}
Rout out gnd 1G
.ENDS

.SUBCKT THERMALINJECTION4R_0 Tj Tamb Tctop Tb P Params: 
+ THERMAL_MODEL=1 ; 0 = External case to ambient thermal model, 1 = Internal case to ambient thermal model 
+ DC=1 ; 0 = thermal model switched off in operating point calculation , 1 = thermal model switched on in operating point calculation
*+ RthJA25=125 RthJCtop25=16 RthJB25=55 Ctj=198.704482u Ctb=213.280684m Ctc=377u Rtca=5k ; DSO-8
*+ RthJA25=64 RthJCtop25=9 RthJB25=13 Ctj=248.746859u Ctb=20.001486m Ctc=105.3u Rtca=11.111111k ; MSOP-8
*+ RthJA25=61 RthJCtop25=8 RthJB25=11 Ctj=248.746859u Ctb=20.001486m Ctc=105.3u Rtca=11.111111k ; WSON-8
*+ RthJA25=250 RthJCtop25=100 RthJB25=100 Ctj=166.366396u Ctb=57.3053m Ctc=60.32u Rtca=21.551724k ; SOT23-3
+ RthJA25=151 RthJCtop25=51 RthJB25=51 Ctj=166.366396u Ctb=57.3053m Ctc=60.32u Rtca=21.551724k ; SOT23-6
.Param Rtjctop={Max(RthJCtop25, 1m)}  
.Param Rtjb={Max(RthJB25, 1m)}  
.Param Rtja={Max(RthJA25, Max(Rtjb,Rtjb)+1m)} 
.Param Rtcatop={Max(Rtca, 1m)}
.Param Rtba= {IF (THERMAL_MODEL > 0.5, Rtja*(Rtjctop + Rtca)/(Rtjctop + Rtca - Rtja) - Rtjb, Rtca)}
.Param Ctctop={Max(Ctc, 1p)}
.Param Ctbot= {IF (THERMAL_MODEL > 0.5, {Max(Ctb, 1p)}, Ctctop)}
*Rtemp       Tamb 0 1MEG 
*GTemp       0 Tamb VALUE = {1U*TEMP}
Rtemp       Tamb 0 1k
GTemp       0 Tamb VALUE = {1m*TEMP}
*GP         Tamb Tj Value={if (Time>1n ,V(P),0.0)}
GP         Tamb Tj Value={if ( (Time>1n) | (DC>0.5) ,V(P),0.0)}
*GP         Tamb Tj Value={V(P)}
Rtba        Tb Tamb {Rtba}  
Ctb         Tb Tamb {Ctbot}
Rtjb        Tj Tb {Rtjb} 
Rtca        Tctop Tamb {Rtcatop} 
Ctctop      Tctop Tamb {Ctctop}
Rtjctop     Tj Tctop {Rtjctop} 
Ctj         Tj Tamb {Ctj}
.Ends

.SUBCKT DA_BUF_DP_0 IN OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0 OUT_LOW=0.0 OUT_HIGH=1.0 ROUT=1 COUT=0
*
XU1     IN OUT DPWR DGND   DA_BUF_P 
+ PARAMS:  DLH={DLH} DHL={DHL} OUT_LOW={OUT_LOW} OUT_HIGH={OUT_HIGH} ROUT={ROUT} COUT={COUT}
.ENDS

.SUBCKT AD_BUF_DP_0 IN OUT DPWR DGND
+ PARAMS:    DLH = 0 DHL = 0 IN_LOW=0.475 IN_HIGH=0.525
*
XU1     IN OUT DPWR DGND   AD_BUF_P
+ PARAMS:  DLH={DLH} DHL={DHL} IN_LOW={IN_LOW} IN_HIGH={IN_HIGH}
.ENDS

.SUBCKT INV_DP_0 IN OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
XU1     IN OUT DPWR DGND   INV_P 
+ PARAMS:  DLH={DLH} DHL={DHL}
.ENDS


.SUBCKT D_LIM01_0 1 2
D1 1 2  D_LIM01
.ENDS
.MODEL D_LIM01 D( IS=10F N=0.1 RS=10 XTI=0 AF=0 KF=0 EG=0.111)


.SUBCKT LEB_0 IN GND OUT PWR
+ PARAMS:    LEB = 100n
XU1         IN 5 PWR GND BUF_P
+ PARAMS: DLH={LEB} DHL={1N}
XU2         IN 5 OUT PWR GND AND2_P
+ PARAMS: DLH=0N DHL=0N 
.ENDS

.SUBCKT SWMOSP_1EDN7550_0 D  G  S  B  Vdd Vss

Rs     S    Si   1.0m
Rg     G    Gi   1.0
Rd     D    Di   1.0m
Rb     B    Bi   1.0m

M1      Di1    Gi    Si    Bi    SWMOS M=16 W=99u L=1u
.MODEL SWMOS PMOS (LEVEL=1 KP= 388.4787u  VTO=-2.0278 LAMBDA=100m)
RDS Di1 Si 10e5

Rd2     Di    Di1   195m TC=0m

Dbody   Di Bi    DBODY
.MODEL DBODY  D(IS=8.41E-09 N=1.21)

Cgd     Gi    Di    {119.469021f}
Cgs     Gi    Si    5p
Cds     Di    Si    5p

.ENDS  

.SUBCKT D_LIM1_0 1 2
D1 1 2  D_Lim1
.ENDS
.MODEL D_LIM1 D( IS=10F N=1.0 RS=100 XTI=0 AF=0 KF=0 EG=0.48)


.SUBCKT D_LIM1_RS100_0 1 2
D1 1 2  D_Lim1_Rs100
.MODEL D_Lim1_Rs100 D( IS=10F N=1.0 RS=100 XTI=0 AF=0 KF=0 EG=0.48)
.ENDS

.SUBCKT D_LIMCM_0 1 2
D1 1 2  D_Limcm
.PARAM EGdc= {0.200}
.PARAM Ndc= {0.20}
.PARAM RSdc= {1}
.MODEL D_LIMcm D( IS=10f N={Ndc} RS={RSdc} XTI=0 AF=0 KF=0 EG={EGdc})
.ENDS

********************************************
**  This file was created by TINA       **
**   SMPS subcircuits  for PSpice       **
**    (c) 1996-2019 DesignSoft, Inc.      **
********************************************
*! Library references
*! Library name, version
*! BaseComps_PSpice, 2019-03-03

*! Change history of model
*! Version, Changes
*! 1.0-2015-04-08, creation	   
*! 1.1-2017-01-10, fixes
*! 1.2-2019-03-03, VCO bug fix

.Subckt Ampli INp INm OUT  Vp Vm
+ Params: GAIN=1000 RIN=1E12 ROUT=10 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=10M IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=500K SLEWRATERISE=0 SLEWRATEFALL=0 FPOLE1=5 FPOLE2=1MEG VDROPOH=0 VDROPOL=0 
+    VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 CURRDOUB=0 VOUTOFFS=0
X1 INp INm Vp Vm Out  OPAMP Params: 
+    GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} FPOLE1={FPOLE1} FPOLE2={FPOLE2} VDROPOH={VDROPOH} VDROPOL={VDROPOL} VOFFS={VOFFSNOM} 
+    TCOVOFFS={TCOVOFFS} IBIAS={IBIASNOM} IOFFS={IOFFSNOM} CURRDOUB={CURRDOUB} VOUTOFFS={VOUTOFFS}  );
.Ends Ampli 

.Subckt AmpliGndRefS INp INm OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=100 FPOLE1=1MEG VOUTH=10 VOUTL=0 
+    VOFFSNOM=0 IBIASNOM=0 IOFFSNOM=0 VOUTOFFS=0
X1 INp INm GND Out  OPAMPGndRefS  Params: 
+    GAIN={GAIN} RIN={RIN} ROUT={ROUT} FPOLE1={FPOLE1} VOUTH={VOUTH} VOUTL={VOUTL} VOFFS={VOFFSNOM} 
+    IBIAS={IBIASNOM} IOFFS={IOFFSNOM} VOUTOFFS={VOUTOFFS}  );
.Ends AmpliGndRefS 

.Subckt AmpliGndRef INp INm OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=100 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=10M IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=500K SLEWRATERISE=0 SLEWRATEFALL=0 FPOLE1=5 FPOLE2=1MEG VOUTH=10 VOUTL=0 
+    VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 CURRDOUB=0 VOUTOFFS=0
X1 INp INm GND Out  OPAMPGndRef Params: 
+    GAIN={GAIN} RIN={RIN} ROUT={ROUT}  SLEWRATE={SLEWRATE}  FPOLE1={FPOLE1} FPOLE2={FPOLE2} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VOFFS={VOFFSNOM}  IBIAS={IBIASNOM} IOFFS={IOFFSNOM} 
.Ends AmpliGndRef 

.Subckt Comp INp INm OUT  Vp Vm
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 DELAYHL=0 DELAYLH=0 
+    VHYST=0 VDROPOH=0 VDROPOL=0  VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 VTHRES=0 
X1 INp INm Vp Vm Out  COMPARATOR Params: 
+    GAIN={GAIN} RIN={RIN} ROUT={ROUT} ROUTSOURCE={ROUTSOURCE} ROUTSINK={ROUTSINK} IOUTMAX={IOUTMAX} 
+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} DELAY={DELAY} DELAYHL={DELAYHL} DELAYLH={DELAYLH} VHYST={VHYST} VDROPOH={VDROPOH}
+    VDROPOL={VDROPOL}  VOFFS={VOFFSNOM} TCOVOFFS={TCOVOFFS} IBIAS={IBIASNOM} IOFFS={IOFFSNOM} 
+    CURRDOUB={CURRDOUB} VOUTOFFS={VOUTOFFS}  VTHRES={VTHRES}
.Ends Comp

.Subckt CompGndRef  INp INm OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 DELAYHL=0 DELAYLH=0 
+    VHYST=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 VTHRES=0
X1 INp INm Out Gnd  ComparGndRef  Params: 
+    GAIN={GAIN} RIN={RIN} ROUT={ROUT} SLEWRATE={SLEWRATE} 
+    DELAY={DELAY} VHYST={VHYST} VOUTH={VOUTH} 
+    VOUTL={VOUTL} VOFFS={VOFFSNOM} IBIAS={IBIASNOM} IOFFS={IOFFSNOM} 
+     VTHRES={VTHRES}
.Ends CompGndRef 
			 
.Subckt CompGndRefS  INp INm OUT GND
+ Params: Vthres=1 Vhyst=0 VoutH=5 VoutL=0 Rout=0 DELAY=1N
*X1 INp INm Out Gnd   HYSTCOMP  Params: 
*+    ROUT={ROUT} Tdel={DELAY} VHYST={VHYST} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES={VTHRES}
X1 INp INm Out Gnd   COMPARGndRefS  Params: 
+    ROUT={ROUT} DELAYLH={DELAY} DELAYHL={DELAY} VHYST={VHYST} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES={VTHRES}
.Ends CompGndRefS 	

.Subckt CompGndRefS_THL  INp INm OUT GND
+ Params: RIN=1E12 Vthres=0 Vhyst=0 VoutH=5 VoutL=0 Rout=0 DELAYHL=0 DELAYLH=0
X1 INp INm Out Gnd   COMPARGndRefS  Params: 
+ RIN={RIN} ROUT={ROUT} DELAYLH={DELAYLH} DELAYHL={DELAYHL} VOUTH={VOUTH} VOUTL={VOUTL} 
+ VTHRES={VTHRES} VHYST={VHYST} 
.Ends CompGndRefS_THL 
			   
.Subckt CompSD IN1p IN1m OUT GND
+ PARAMS: RIN=1E12 ROUT=10 DELAY=10N VOUTH=5 VOUTL=0 VTHRES=2.5
*
.Param Tdel = {IF ( (DELAY < 1e-9) , 1e-9, DELAY ) } 
.Param Rdel = {IF ( (Tdel > 1E-15) & (Rout < 1), 1, Rout ) } 
.Param Cout={Tdel/(0.693*(Rdel+1u))}
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
EOUT OUT GND VALUE= { IF ( (V(IN1p,IN1m) > {VTHRES}), 
+ VOUTH + RDEL*I(EOUT), VOUTL + RDEL*I(EOUT) ) }
COUT OUT GND {COUT}
.Ends CompSD

.Subckt CompInvS IN1p IN1m OUT GND
+ PARAMS: RIN=1E12 VOUTH=5 VOUTL=0 VTHRES=2.5
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
EOUT OUT GND VALUE= { IF ( (V(IN1p,IN1m) > {VTHRES}), VOUTL, VOUTH ) }
.Ends CompInvS

.Subckt CompInvSD IN1p IN1m OUT GND
+ PARAMS: RIN=1E12 ROUT=10 DELAY=10N VOUTH=5 VOUTL=0 VTHRES=2.5
*
.PARAM RDEL = {IF ( (DELAY > 1E-15) & (ROUT < 1), 1, ROUT ) } 
.PARAM COUT={DELAY/(0.693*(RDEL+1U))}
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
EOUT OUT GND VALUE= { IF ( (V(IN1p,IN1m) > {VTHRES}), 
+ VOUTL + RDEL*I(EOUT), VOUTH + RDEL*I(EOUT) ) }
COUT OUT GND {COUT}
.Ends CompInvSD	  
				  
.Subckt CompInvD IN1p IN1m OUT GND
+ PARAMS: RIN=1E12 ROUT=10 DELAYLH=10N DELAYHL=10N VOUTH=5 VOUTL=0 VTHRES=2.5
*
.PARAM RDEL = {IF ( (ROUT < 1), 1, ROUT ) } 
.PARAM COUT={(DELAYLH + DELAYHL)/2/(0.693*RDEL)}
.PARAM RDELHL = {DELAYHL/(0.693*COUT)}
.PARAM RDELLH = {DELAYLH/(0.693*COUT)}

RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
EOUT OUT GND VALUE= { IF ( (V(IN1p,IN1m) > {VTHRES}), 
+ VOUTL + RDELHL*I(EOUT), VOUTH + RDELLH*I(EOUT) ) }
ROP OUT GND 1MEG
COUT OUT GND {COUT}
.Ends CompInvD

.Subckt Comp2INp IN1p IN1m IN2p IN2m OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 LOGICFUNC=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0
X1 IN1p IN1m IN2p IN2m Out Gnd  Comp2INpAnd  Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL}
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}

+    IOUTMAXSOURCE={IOUTMAXSOURCE} IOUTMAXSINK={IOUTMAXSINK} SLEWRATE={SLEWRATE} SLEWRATERISE={SLEWRATERISE} 
+    SLEWRATEFALL={SLEWRATEFALL} DELAY={DELAY} DELAYHL={DELAYHL} DELAYLH={DELAYLH} VOUTH={VOUTH} 
+    VOUTL={VOUTL} VOFFSNOM={VOFFSNOM} TCOVOFFS={TCOVOFFS} IBIASNOM={IBIASNOM} IOFFSNOM={IOFFSNOM} CURRDOUB={CURRDOUB}
+    VOUTOFFS={VOUTOFFS} DCTRANSFER={DCTRANSFER} LOGICFUNC={LOGICFUNC} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
.Ends Comp2INp

.Subckt Comp2INpAndS IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) & (V(IN2p,IN2m) > {VTHRES2}), VOUTH, VOUTL ) }
.Ends Comp2INpAndS

.Subckt Comp2INpAndSD IN1p IN1m IN2p IN2m OUT GND
+ PARAMS: RIN=1E12 ROUT=10 DELAY=10N VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
*
.Param Tdel = {IF ( (DELAY < 1e-9) , 1e-9, DELAY ) } 
.Param Rdel = {IF ( (Tdel > 1E-15) & (Rout < 1), 1, Rout ) } 
.Param Cout={Tdel/(0.693*(Rdel+1u))}

RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
EOUT OUT GND VALUE= { IF ( (V(IN1p,IN1m) > {VTHRES1}) & (V(IN2p,IN2m) > {VTHRES2}), 
+ VOUTH + RDEL*I(EOUT), VOUTL + RDEL*I(EOUT) ) }
COUT OUT GND {COUT}
.Ends Comp2INpAndSD

.Subckt Comp2InpAndSDLH IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 ROUT=10 DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0
*
.Param Rdel = {IF ( Rout < 1, 1, Rout ) }
*.Param Cout={Tdel/(0.693*(Rdel+1u))}
.Param Tdhl = {IF ( (DELAYHL < 1e-9) , 1e-9, DELAYHL ) }
.Param Tdlh = {IF ( (DELAYLH < 1e-9) , 1e-9, DELAYLH ) }
.Param Cout={Sqrt(Tdhl*Tdlh)/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt(Tdhl/(Tdlh+1p))}
.Param Rdhl={Tdhl/(Tdlh+1p)*Rdlh}
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
EOUT OUT GND VALUE= { IF ( (V(IN1p,IN1m) > {VTHRES1}) & (V(IN2p,IN2m) > {VTHRES2}),
+ VOUTH + Rdlh*I(EOUT), VOUTL + Rdhl*I(EOUT) ) }
COUT OUT GND {COUT}
.Ends Comp2InpAndSDLH

.Subckt Comp2INpAnd IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 DELAY=10N VOUTH=5 VOUTL=0 VTHRES1=2.5 VHYST1=0 VTHRES2=2.5 VHYST2=0 
.Param VoutM={(VoutH+VoutL)/2}
X1 IN1p IN1m IN2p IN2m ST1 ST2 GND Hyst2INp Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
Eo OUT gnd Value= { IF ( (V(st1,GND) > {VoutM}) & (V(st2,GND) > {VoutM}), VOUTH, VOUTL ) }
.Ends Comp2INpAnd

.Subckt Comp2InpAndF IN1p IN1m IN2p IN2m OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 LOGICFUNC=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0
X1 IN1p IN1m IN2p IN2m Out Gnd  Comp2INpAnd  Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
.Ends Comp2InpAndF

.Subckt Comp2INpOrS IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}), VOUTH, VOUTL ) }
.Ends Comp2INpOrS


.Subckt Comp2INpOr IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 DELAY=10N VOUTH=5 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 
.Param VoutM={(VoutH+VoutL)/2}
X1 IN1p IN1m IN2p IN2m ST1 ST2 GND Hyst2INp Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
Eo OUT gnd Value= { IF ( (V(st1,GND) > {VoutM}) | (V(st2,GND) > {VoutM}), VOUTH, VOUTL ) }
.Ends Comp2INpOr 

.Subckt Comp2InpOrF IN1p IN1m IN2p IN2m OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0
X1 IN1p IN1m IN2p IN2m OUT GND Comp2INpOr Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
.Ends Comp2InpOrF
					  
.Subckt Comp2INpNAnd IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 DELAY=10N VOUTH=5 VOUTL=0 VTHRES1=2.5 VHYST1=0 VTHRES2=2.5 VHYST2=0 
.Param VoutM={(VoutH+VoutL)/2}
X1 IN1p IN1m IN2p IN2m ST1 ST2 GND Hyst2INp Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
Eo OUT gnd Value= { IF ( (V(st1,GND) > {VoutM}) & (V(st2,GND) > {VoutM}), VOUTL, VOUTH ) }
.Ends Comp2INpNAnd

.Subckt Comp2InpNAndS IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) & (V(IN2p,IN2m) > {VTHRES2}), VOUTL, VOUTH ) }
.Ends Comp2InpNAndS

.Subckt Comp2INpNAndSD IN1p IN1m IN2p IN2m OUT GND
+ PARAMS: RIN=1E12 ROUT=0 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0
*
.PARAM RDEL = {IF ( (DELAY > 1E-15) & (ROUT < 1), 1, ROUT ) } 
.PARAM COUT={DELAY/(0.693*(RDEL+1U))}
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
EOUT OUT GND VALUE= { IF ( (V(IN1p,IN1m) > {VTHRES1}) & (V(IN2p,IN2m) > {VTHRES2}), 
+ VOUTL + RDEL*I(EOUT), VOUTH + RDEL*I(EOUT) ) }
COUT OUT GND {COUT}
.Ends Comp2INpNAndSD

.Subckt Comp2InpNAndF IN1p IN1m IN2p IN2m OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0
X1 IN1p IN1m IN2p IN2m OUT GND Comp2INpNAnd Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}

.Ends Comp2InpNAndF
			  
.Subckt Comp2InpNOr IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 DELAY=10N VOUTH=5 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 
.Param VoutM={(VoutH+VoutL)/2}
X1 IN1p IN1m IN2p IN2m ST1 ST2 GND Hyst2INp Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
Eo OUT gnd Value= { IF ( (V(st1,GND) > {VoutM}) | (V(st2,GND) > {VoutM}), VOUTL, VOUTH ) }
.Ends Comp2InpNOr 


.Subckt Comp2INpNOrS IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}), VOUTL, VOUTH ) }
.Ends Comp2INpNOrS

.Subckt Comp2INpNOrSD IN1p IN1m IN2p IN2m OUT GND
+ Params: RIN=1E12 ROUT=0 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0
*
.Param Tdel = {IF ( (DELAY < 1e-9) , 1e-9, DELAY ) } 
.Param Rdel = {IF ( (Tdel > 1E-15) & (Rout < 1), 1, Rout ) } 
.Param Cout={Tdel/(0.693*(Rdel+1u))}
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
Eout OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}), 
+ VOUTL + Rdel*I(Eout), VOUTH + Rdel*I(Eout) ) }
Cout OUT gnd {Cout}
.Ends Comp2INpNOrSD

.Subckt Hyst2INp IN1p IN1m IN2p IN2m ST1 ST2 GND
+ Params: RIN=1E12 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH1={Vthres1+Vhyst1}
.Param VthL1={Vthres1-Vhyst1}
.Param VthH2={Vthres2+Vhyst2}
.Param VthL2={Vthres2-Vhyst2}
.Param Rdel=10
.Param Tdel = {IF ( (DELAY < 1e-9) , 1e-9, DELAY ) } 
.Param Cdel={Tdel/(0.693*Rdel)}
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
Ethr1 thr1 gnd Value= { IF ( V(st1,gnd) < {VoutM}, {VthH1}, {VthL1}) }
Est1 st1 gnd Value= { IF ( V(IN1p,IN1m) > V(thr1,gnd), VoutH + Rdel*I(Est1), VoutL + Rdel*I(Est1) ) }
Cst1 st1 gnd {Cdel} 
Rp1 st1 gnd 1Meg
Ethr2 thr2 gnd Value= { IF ( V(st2,gnd) < {VoutM}, {VthH2}, {VthL2}) }
Est2 st2 gnd Value= { IF ( V(IN2p,IN2m) > V(thr2,gnd), VoutH + Rdel*I(Est2), VoutL + Rdel*I(Est2) ) }
Cst2 st2 gnd {Cdel} 
Rp2 st2 gnd 1Meg
.Ends Hyst2INp

.Subckt Hyst2INp_THL IN1p IN1m IN2p IN2m ST1 ST2 GND
+ Params: RIN=1E12 DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH1={Vthres1+Vhyst1}
.Param VthL1={Vthres1-Vhyst1}
.Param VthH2={Vthres2+Vhyst2}
.Param VthL2={Vthres2-Vhyst2}
.Param Rdel=10
.Param Tdhl = {IF ( (DELAYHL < 1e-9) , 1e-9, DELAYHL ) }
.Param Tdlh = {IF ( (DELAYLH < 1e-9) , 1e-9, DELAYLH ) }
*.Param Cdel={Tdel/(0.693*Rdel)}
.Param Cdel={Sqrt(Tdhl*Tdlh)/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt(Tdhl/(Tdlh+1p))}
.Param Rdhl={Tdhl/(Tdlh+1p)*Rdlh}
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
Ethr1 thr1 gnd Value= { IF ( V(st1,gnd) < {VoutM}, {VthH1}, {VthL1}) }
Est1 st1 gnd Value= { IF ( V(IN1p,IN1m) > V(thr1,gnd), VoutH + Rdlh*I(Est1), VoutL + Rdhl*I(Est1) ) }
Cst1 st1 gnd {Cdel}
Rp1 st1 gnd 1Meg
Ethr2 thr2 gnd Value= { IF ( V(st2,gnd) < {VoutM}, {VthH2}, {VthL2}) }
Est2 st2 gnd Value= { IF ( V(IN2p,IN2m) > V(thr2,gnd), VoutH + Rdlh*I(Est2), VoutL + Rdhl*I(Est2) ) }
Cst2 st2 gnd {Cdel}
Rp2 st2 gnd 1Meg
.Ends Hyst2INp_THL	   

.Subckt Comp3INpAndS IN1p IN1m IN2p IN2m IN3p IN3m OUT GND
+ Params: RIN=1E12 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0 VTHRES3=0
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) & (V(IN2p,IN2m) > {VTHRES2}) & (V(IN3p,IN3m) > {VTHRES3}), VOUTH, VOUTL ) }
.Ends Comp3INpAndS

.Subckt Comp3INpAnd IN1p IN1m IN2p IN2m IN3p IN3m OUT GND
+ Params: RIN=1E12 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0  
.Param VoutM={(VoutH+VoutL)/2}
X1 IN1p IN1m IN2p IN2m IN3p IN3m ST1 ST2  ST3 GND Hyst3INp Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2} VTHRES3={VTHRES3} VHYST3={VHYST3}
Eo OUT gnd Value= { IF ( (V(st1,GND) > {VoutM}) & (V(st2,GND) > {VoutM}) & (V(st3,GND) > {VoutM}), VOUTH, VOUTL ) }
.Ends Comp3INpAnd

.Subckt Comp3InpAndF IN1p IN1m IN2p IN2m IN3p IN3m OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0
X1 IN1p IN1m IN2p IN2m IN3p IN3m OUT GND Comp3INpAnd Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2} VTHRES3={VTHRES3} VHYST3={VHYST3}

.Ends Comp3InpAndF
.Subckt Comp3INpOr IN1p IN1m IN2p IN2m IN3p IN3m OUT GND
+ Params: RIN=1E12 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0  
.Param VoutM={(VoutH+VoutL)/2}
X1 IN1p IN1m IN2p IN2m IN3p IN3m ST1 ST2  ST3 GND Hyst3INp Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2} VTHRES3={VTHRES3} VHYST3={VHYST3}
Eo OUT gnd Value= { IF ( (V(st1,GND) > {VoutM}) | (V(st2,GND) > {VoutM}) | (V(st3,GND) > {VoutM}), VOUTH, VOUTL ) }
.Ends Comp3INpOr

.Subckt Comp3InpOrS IN1p IN1m IN2p IN2m IN3p IN3m OUT GND
+ Params: RIN=1E12 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0  
*
Rinp1 IN1p GND {RIN}
Rinm1 IN1m GND {RIN}
Rinp2 IN2p GND {RIN}
Rinm2 IN2m GND {RIN}
Rinp3 IN3p GND {RIN}
Rinm3 IN3m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}) | (V(IN3p,IN3m) > {VTHRES3}), VOUTH, VOUTL  ) }
.Ends Comp3InpOrS

.Subckt Comp3InpNOrS IN1p IN1m IN2p IN2m IN3p IN3m OUT GND
+ Params: RIN=1E12 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0 VTHRES3=0 
*
Rinp1 IN1p GND {RIN}
Rinm1 IN1m GND {RIN}
Rinp2 IN2p GND {RIN}
Rinm2 IN2m GND {RIN}
Rinp3 IN3p GND {RIN}
Rinm3 IN3m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}) | (V(IN3p,IN3m) > {VTHRES3}), VOUTL, VOUTH  ) }
.Ends Comp3InpNOrS

.Subckt Comp3INpNOrSD IN1p IN1m IN2p IN2m IN3p IN3m OUT GND
+ Params: RIN=1E12 ROUT=0 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0 VTHRES3=0
*
.Param Tdel = {IF ( (DELAY < 1e-9) , 1e-9, DELAY ) } 
.Param Rdel = {IF ( (Tdel > 1E-15) & (Rout < 1), 1, Rout ) } 
.Param Cout={Tdel/(0.693*(Rdel+1u))}
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
Eout OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}) | (V(IN3p,IN3m) > {VTHRES3}), 
+ VOUTL + Rdel*I(Eout), VOUTH + Rdel*I(Eout) ) }
Cout OUT gnd {Cout}
.Ends Comp3INpNOrSD

.Subckt Hyst3INp IN1p IN1m IN2p IN2m IN3p IN3m ST1 ST2 ST3 GND
+ Params: RIN=1E12 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0 
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH1={Vthres1+Vhyst1}
.Param VthL1={Vthres1-Vhyst1}
.Param VthH2={Vthres2+Vhyst2}
.Param VthL2={Vthres2-Vhyst2}
.Param VthH3={Vthres3+Vhyst3}
.Param VthL3={Vthres3-Vhyst3}
.Param Rdel=10
.Param Tdel = {IF ( (DELAY < 1e-9) , 1e-9, DELAY ) } 
.Param Cdel={Tdel/(0.693*Rdel)}
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
Ethr1 thr1 gnd Value= { IF ( V(st1,gnd) < {VoutM}, {VthH1}, {VthL1}) }
Est1 st1 gnd Value= { IF ( V(IN1p,IN1m) > V(thr1,gnd), VoutH + Rdel*I(Est1), VoutL + Rdel*I(Est1) ) }
Cst1 st1 gnd {Cdel} 
Rp1 st1 gnd 1Meg
Ethr2 thr2 gnd Value= { IF ( V(st2,gnd) < {VoutM}, {VthH2}, {VthL2}) }
Est2 st2 gnd Value= { IF ( V(IN2p,IN2m) > V(thr2,gnd), VoutH + Rdel*I(Est2), VoutL + Rdel*I(Est2) ) }
Cst2 st2 gnd {Cdel} 
Rp2 st2 gnd 1Meg
Ethr3 thr3 gnd Value= { IF ( V(st3,gnd) < {VoutM}, {VthH3}, {VthL3}) }
Est3 st3 gnd Value= { IF ( V(IN3p,IN3m) > V(thr3,gnd), VoutH + Rdel*I(Est3), VoutL + Rdel*I(Est3) ) }
Cst3 st3 gnd {Cdel} 
Rp3 st3 gnd 1Meg
.Ends Hyst3INp

.Subckt Comp3INp IN1p IN1m IN2p IN2m IN3p IN3m OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 LOGICFUNC=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0
X1 IN1p IN1m IN2p IN2m IN3p IN3m Out Gnd  Comp3INpAnd Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2} VTHRES3={VTHRES3} VHYST3={VHYST3}
.Ends Comp3INp

.Subckt Comp4InpAndSDLH IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m OUT GND
+ Params: RIN=1E12 ROUT=10 DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0 VTHRES3=0 VTHRES4=0
*
.Param Rdel = {IF ( Rout < 1, 1, Rout ) }
*.Param Cout={Tdel/(0.693*(Rdel+1u))}
.Param Tdhl = {IF ( (DELAYHL < 1e-9) , 1e-9, DELAYHL ) }
.Param Tdlh = {IF ( (DELAYLH < 1e-9) , 1e-9, DELAYLH ) }
.Param Cout={Sqrt(Tdhl*Tdlh)/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt(Tdhl/(Tdlh+1p))}
.Param Rdhl={Tdhl/(Tdlh+1p)*Rdlh}
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
RINp4 IN4p GND {RIN}
RINm4 IN4m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) & (V(IN2p,IN2m) > {VTHRES2}) & (V(IN3p,IN3m) > {VTHRES3}) & 
+ (V(IN4p,IN4m) > {VTHRES4}), VOUTH + Rdlh*I(EOUT), VOUTL + Rdhl*I(EOUT)  ) }
COUT OUT GND {COUT}
.Ends Comp4InpAndSDLH

.Subckt Comp4INpAndS IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m OUT GND
+ Params: RIN=1E12 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0 VTHRES3=0 VTHRES4=0
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
RINp4 IN4p GND {RIN}
RINm4 IN4m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) & (V(IN2p,IN2m) > {VTHRES2}) & (V(IN3p,IN3m) > {VTHRES3}) & 
+ (V(IN4p,IN4m) > {VTHRES4}), VOUTH, VOUTL ) }
.Ends Comp4INpAndS

.Subckt Comp4INpAnd IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m OUT GND
+ Params: RIN=1E12 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0 VTHRES4=0 VHYST4=0  
.Param VoutM={(VoutH+VoutL)/2}
X1 IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m ST1 ST2 ST3 ST4 GND Hyst4INp Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
+    VTHRES3={VTHRES3} VHYST3={VHYST3} VTHRES4={VTHRES4} VHYST4={VHYST4}
Eo OUT gnd Value= { IF ( (V(st1,GND) > {VoutM}) & (V(st2,GND) > {VoutM}) & (V(st3,GND) > {VoutM}) & 
+ (V(st4,GND) > {VoutM}), VOUTH, VOUTL ) }
.Ends Comp4INpAnd

.Subckt Comp4INpAndF IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m OUT GND
+ Params: GAIN=1000 RIN=1E12 ROUT=0 ROUTSOURCE=0 ROUTSINK=0 IOUTMAX=0 IOUTMAXSOURCE=0 
+    IOUTMAXSINK=0 SLEWRATE=0 SLEWRATERISE=0 SLEWRATEFALL=0 DELAY=0 
+    DELAYHL=0 DELAYLH=0 VOUTH=0 VOUTL=0 VOFFSNOM=0 TCOVOFFS=0 IBIASNOM=0 IOFFSNOM=0 
+    CURRDOUB=0 VOUTOFFS=0 DCTRANSFER=0 LOGICFUNC=0 
+    VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0 VTHRES4=0 VHYST4=0 
X1 IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m Out Gnd Comp4INpAnd Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
+    VTHRES3={VTHRES3} VHYST3={VHYST3} VTHRES4={VTHRES4} VHYST4={VHYST4}
.Ends Comp4INpAndF

.Subckt Comp4INpOrS IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m OUT GND
+ Params: RIN=1E12 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0 VTHRES3=0 VTHRES4=0
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
RINp4 IN4p GND {RIN}
RINm4 IN4m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}) | (V(IN3p,IN3m) > {VTHRES3}) | 
+ (V(IN4p,IN4m) > {VTHRES4}), VOUTH, VOUTL ) }
.Ends Comp4INpOrS	

.Subckt Comp4InpOr IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m OUT GND
+ Params: RIN=1E12 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0 VTHRES4=0 VHYST4=0  
.Param VoutM={(VoutH+VoutL)/2}
X1 IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m ST1 ST2 ST3 ST4 GND Hyst4INp Params: 
+    RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} 
+    VTHRES1={VTHRES1} VHYST1={VHYST1} VTHRES2={VTHRES2} VHYST2={VHYST2}
+    VTHRES3={VTHRES3} VHYST3={VHYST3} VTHRES4={VTHRES4} VHYST4={VHYST4}
Eo OUT gnd Value= { IF ( (V(st1,GND) > {VoutM}) | (V(st2,GND) > {VoutM}) | (V(st3,GND) > {VoutM}) | 
+ (V(st4,GND) > {VoutM}), VOUTH, VOUTL ) }
.Ends Comp4InpOr

.Subckt Hyst4INp IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m ST1 ST2 ST3 ST4 GND
+ Params: RIN=1E12 DELAY=0 VOUTH=0 VOUTL=0 VTHRES1=0 VHYST1=0 VTHRES2=0 VHYST2=0 VTHRES3=0 VHYST3=0 VTHRES4=0 VHYST4=0
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH1={Vthres1+Vhyst1}
.Param VthL1={Vthres1-Vhyst1}
.Param VthH2={Vthres2+Vhyst2}
.Param VthL2={Vthres2-Vhyst2}
.Param VthH3={Vthres3+Vhyst3}
.Param VthL3={Vthres3-Vhyst3}
.Param VthH4={Vthres4+Vhyst4}
.Param VthL4={Vthres4-Vhyst4}
.Param Rdel=10
.Param Tdel = {IF ( (DELAY < 1e-9) , 1e-9, DELAY ) } 
.Param Cdel={Tdel/(0.693*Rdel)}
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
RINp4 IN4p GND {RIN}
RINm4 IN4m GND {RIN}
Ethr1 thr1 gnd Value= { IF ( V(st1,gnd) < {VoutM}, {VthH1}, {VthL1}) }
Est1 st1 gnd Value= { IF ( V(IN1p,IN1m) > V(thr1,gnd), VoutH + Rdel*I(Est1), VoutL + Rdel*I(Est1) ) }
Cst1 st1 gnd {Cdel} 
Rp1 st1 gnd 1Meg
Ethr2 thr2 gnd Value= { IF ( V(st2,gnd) < {VoutM}, {VthH2}, {VthL2}) }
Est2 st2 gnd Value= { IF ( V(IN2p,IN2m) > V(thr2,gnd), VoutH + Rdel*I(Est2), VoutL + Rdel*I(Est2) ) }
Cst2 st2 gnd {Cdel} 
Rp2 st2 gnd 1Meg
Ethr3 thr3 gnd Value= { IF ( V(st3,gnd) < {VoutM}, {VthH3}, {VthL3}) }
Est3 st3 gnd Value= { IF ( V(IN3p,IN3m) > V(thr3,gnd), VoutH + Rdel*I(Est3), VoutL + Rdel*I(Est3) ) }
Cst3 st3 gnd {Cdel} 
Rp3 st3 gnd 1Meg
Ethr4 thr4 gnd Value= { IF ( V(st4,gnd) < {VoutM}, {VthH4}, {VthL4}) }
Est4 st4 gnd Value= { IF ( V(IN4p,IN4m) > V(thr4,gnd), VoutH + Rdel*I(Est4), VoutL + Rdel*I(Est4) ) }
Cst4 st4 gnd {Cdel} 
Rp4 st4 gnd 1Meg
.Ends Hyst4INp


.Subckt Comp4INpNOrS IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m OUT GND
+ Params: RIN=1E12 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0 VTHRES3=0 VTHRES4=0 
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
RINp4 IN4p GND {RIN}
RINm4 IN4m GND {RIN}
Eo OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}) | (V(IN3p,IN3m) > {VTHRES3}) | 
+ (V(IN4p,IN4m) > {VTHRES4}), VOUTL, VOUTH ) }
.Ends Comp4INpNOrS

.Subckt Comp4INpNOrSD IN1p IN1m IN2p IN2m IN3p IN3m IN4p IN4m OUT GND
+ Params: RIN=1E12 DELAYLH=0 DELAYHL=0 VOUTH=0 VOUTL=0 VTHRES1=0 VTHRES2=0 VTHRES3=0 VTHRES4=0 
+ COUT=1p
*
.Param TdelHL = {IF ( (DELAYHL < 1e-9) , 1e-9, DELAYHL ) } 
.Param TdelLH = {IF ( (DELAYLH < 1e-9) , 1e-9, DELAYLH ) } 
.Param Coutc = {IF ( (Cout < 1p), 1p, Cout ) } 
.Param RdelHL = {IF ( (TdelHL < 1E-12), 1, TdelHL/(0.693*(Cout+1p)) ) } 
.Param RdelLH = {IF ( (TdelLH < 1E-12), 1, TdelLH/(0.693*(Cout+1p)) ) } 
*
RINp1 IN1p GND {RIN}
RINm1 IN1m GND {RIN}
RINp2 IN2p GND {RIN}
RINm2 IN2m GND {RIN}
RINp3 IN3p GND {RIN}
RINm3 IN3m GND {RIN}
RINp4 IN4p GND {RIN}
RINm4 IN4m GND {RIN}
Eout OUT gnd Value= { IF ( (V(IN1p,IN1m) > {VTHRES1}) | (V(IN2p,IN2m) > {VTHRES2}) | (V(IN3p,IN3m) > {VTHRES3}) | 
+ (V(IN4p,IN4m) > {VTHRES4}), VOUTL + RdelHL*I(Eout), VOUTH + RdelLH*I(Eout) ) }
Cout OUT gnd {Coutc}
.Ends Comp4INpNOrSD
*$

.Subckt VCO InP InM Gnd OutSin OutTri OutSqr PARAMS: CENTFREQ=0 CONVGAIN=500E3 PHI0=0 OUTAMPLI=2.5 OUTOFFS=2.5
+ INLLIM=0 INULIM=1 LIMRNG=1E-6 DUTYCYC=0.1 RISETIME=1E-9 FALLTIME=1E-9 MODE=1
XO1 InP InM Gnd OutSin OutTri OutSqr VCOscillatorSin PARAMS:
+ CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} VOUTH ={OUTOFFS+OUTAMPLI} VOUTL ={OUTOFFS-OUTAMPLI}
+ INLLIM ={INLLIM} INULIM ={INULIM} DUTYCYC ={DUTYCYC} RISETIME ={RISETIME} FALLTIME ={FALLTIME}
.Ends

.Subckt SINEVCO INp INm Gnd Out PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 PHI0=0 OUTAMPLI=1 OUTOFFS=0 INLLIM=-1E12 INULIM=1E12
+ LIMRNG=1E-6  MODE=1
XO1 InP InM Gnd Out OutTri OutSqr VCOscillatorSin PARAMS:
+ CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} VOUTH ={OUTOFFS+OUTAMPLI} VOUTL ={OUTOFFS-OUTAMPLI}
+ INLLIM ={INLLIM} INULIM ={INULIM}  
.Ends

.Subckt TRIVCO INp INm Gnd Out PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 PHI0=0 OUTAMPLI=1 OUTOFFS=0 INLLIM=-1E12 INULIM=1E12
+ LIMRNG=1E-6 DUTYCYC=0.5 MODE=1
XO1 InP InM Gnd Out OutSqr VCOscillator PARAMS:
+ CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} VOUTH ={OUTOFFS+OUTAMPLI} VOUTL ={OUTOFFS-OUTAMPLI}
+ INLLIM ={INLLIM} INULIM ={INULIM}  DUTYCYC ={DUTYCYC} 
.Ends

.Subckt SQRVCO INp INm Gnd Out PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 PHI0=0 OUTAMPLI=1 OUTOFFS=0 INLLIM=-1E12 INULIM=1E12
+ LIMRNG=1E-6 DUTYCYC=0.5 RISETIME=1E-9 FALLTIME=1E-9 MODE=1
XO1 InP InM Gnd OutTri Out VCOscillator PARAMS:
+ CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} VOUTH ={OUTOFFS+OUTAMPLI} VOUTL ={OUTOFFS-OUTAMPLI}
+ INLLIM ={INLLIM} INULIM ={INULIM} DUTYCYC ={DUTYCYC} RISETIME ={RISETIME} FALLTIME ={FALLTIME}
.Ends

.Subckt SQRTRIVCO InP InM Gnd OutTri OutSqr PARAMS: CENTFREQ=0 CONVGAIN=500E3 PHI0=0 OUTAMPLI=2.5 OUTOFFS=2.5
+ INLLIM=0 INULIM=1 LIMRNG=1E-6 DUTYCYC=0.1 RISETIME=1E-9 FALLTIME=1E-9 MODE=1
XO1 InP InM Gnd OutTri OutSqr VCOscillator PARAMS:
+ CENTFREQ ={ CENTFREQ} CONVGAIN ={CONVGAIN} VOUTH ={OUTOFFS+OUTAMPLI} VOUTL ={OUTOFFS-OUTAMPLI}
+ INLLIM ={INLLIM} INULIM ={INULIM} DUTYCYC ={DUTYCYC} RISETIME ={RISETIME} FALLTIME ={FALLTIME}
.Ends

.Subckt NCOUNTER_UDSR   CLK UD CE S R MIN MAX  GND VCC PARAMS: INTYP=0 OUTTYP=0 DEL=0 IOMODEL=0 
+  DELL2H=10E-9 DELH2L=10E-9 LATCH=1 MAXCOUNT=15
*Y1  UD CLK CE R MIN MAX S GND VCC  _CNTN
*.Model _CNTN  CNTN_UDSR (INTYP ={INTYP} OUTTYP ={OUTTYP} DEL ={DEL} IOMODEL ={IOMODEL} DELL2H ={DELL2H} 
*+ DELH2L ={DELH2L} LATCH ={LATCH} MAXCOUNT ={MAXCOUNT} 
.Ends

* Standard operational amplifier macromodel subcircuit
* Created using 08/05/06
* (REV 1.1 29/07/06 )			   
.SUBCKT StdOpamp11 INP INM VP VM Out
+ Params: GAIN=200K RIN=2MEG RINC=1E9 ROUT=75 SLEWRATE=500K FPOLE1=5 FPOLE2=1MEG 
+         VDROPOH=1.9 VDROPOL=1.9 VOFFS=1m IBIAS=80n IOFFS=20n 
*
.PARAM VOSW = 15
.PARAM pi = 3.141592
.PARAM IS = 1.0E-12
.PARAM VT = 0.02585
.PARAM C1 = {VOSW/ROUT/SLEWRATE}
.PARAM IMAX = {C1*SLEWRATE}
.PARAM R1 = {1/(2*pi*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM R2 = 100
.PARAM G2 = {1/R2}
.PARAM GOUT = {1/ROUT}
.PARAM C2 = {1/(2*pi*R2*FPOLE2)}
.PARAM VDF = {VT*Log(1 + IMAX/IS)}
*
Ibiasm      INM 0  {IBIAS - IOFFS}
RINM      INM  8  {2*RINC}
RINP      INP  8  {2*RINC}
Ibias       10 0   {IBIAS}
Voffs       10 INP  {VOFFS}
Vc          VP 11  {VDROPOH + VDF}
Ve          12 VM  {VDROPOL + VDF}
D1          VM VP  D_1
Rp          VP VM  15E3
ROut        OUT 8  {ROUT}
*GmO         8 OUT Value =  {V(9,8)*GOUT}
GMO         8 OUT 9 8 {GOUT}
C2          9 8  {C2}
R2          9 8  {R2}
*Gm2         8 9  Value =  {V(7,8)*G2}
GM2         8 9 7 8 {G2}
Rin         INM 10  {RIN}
EGND        8  0  POLY(2) (VP,0) (VM,0) 0 .5 .5
D3          12 7  D_1
D2          7 11  D_1
C1          7 8  {C1}
R1          7 8  {R1}
Gm1         8 7 Value = { Limit( GM1*V(10,INM), -IMAX, IMAX) }
.MODEL D_1 D( IS={IS} )
.ENDS

* STANDARD OPERATIONAL AMPLIFIER MACROMODEL SUBCIRCUIT
* CREATED USING 08/05/06
* (REV 1.3 26/02/08 )
.SUBCKT STDOPAMP  INP INM VP VM OUT
+ PARAMS: GAIN=200K RIN=2MEG RINC=1E9 ROUT=75 SLEWRATE=500K FPOLE1=5 FPOLE2=1MEG 
+         VDROPOH=1.9 VDROPOL=1.9 VOFFS=1M IBIAS=80N IOFFS=20N 
*
.PARAM PI = 3.141592
.PARAM IS = 1.0E-12
.PARAM VT = 0.02585
.PARAM IMAX = 100.0E-2
.PARAM C1 = {IMAX/SLEWRATE}
.PARAM R1 = {1/(2*PI*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM R2 = 100
.PARAM G2 = {1/R2}
.PARAM GOUT = {1/ROUT}
.PARAM C2 = {1/(2*PI*R2*FPOLE2)}
.PARAM VDF = {VT*LOG(1 + IMAX/IS)}
*
IBIASM      INM 0  {IBIAS - IOFFS}
RINM      INM  8  {2*RINC}
RINP      INP  8  {2*RINC}
IBIAS       10 0   {IBIAS}
VOFFS       10 INP  {VOFFS}
EVP VPI 0 VP 0 1
EVM VMI 0 VM 0 1
VC          VPI 11  {VDROPOH + VDF}
VE          12 VMI  {VDROPOL + VDF}
D1          VM VP  D_1
RP          VP VM  15E3
ROUT        OUT 8  {ROUT}
GMO         8 OUT 9 8 {GOUT}
C2          9 8  {C2}
R2          9 8  {R2}
GM2         8 9 7 8 {G2}
RIN         INM 10  {RIN}
EGND        8  0  POLY(2) (VP,0) (VM,0) 0 .5 .5
D3         12 7  D_1
D2          7 11  D_1
C1          7 8  {C1}
R1          7 8  {R1}
GM1         8 7 VALUE = { LIMIT( GM1*V(10,INM), -IMAX, IMAX) }
.MODEL D_1 D( IS={IS} )
.ENDS		 

.SUBCKT DFF_PE  PREB CLRB CLK D Q QB DPWR DGND
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 DFF(1) DPWR DGND PREB CLRB CLK
+ D Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS	

.SUBCKT DFF_PE_IRES  PREB CLRB CLK D Q QB DPWR DGND
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
U9          STIM(1,1) $G_DPWR $G_DGND CLRB0 IO_DIG
+      0 0
+      100N 1
U10 AND(2) DPWR DGND CLRB0 CLRB CLRB1
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
U1 DFF(1) DPWR DGND PREB CLRB1 CLK
+ D Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS	

.SUBCKT DFF_NE  PREB CLRB CLKB D Q QB DPWR DGND
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
U2 INV DPWR DGND CLKB CLK 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U1 DFF(1) DPWR DGND PREB CLRB CLK
+ D Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )

.ENDS

.SUBCKT DLTCH  PREB CLRB EN D Q QB
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
U1 DLTCH(1) DPWR DGND PREB CLRB EN
+ D Q QB
+ T_DLTCH IO_DIG
.MODEL T_DLTCH UGFF( TPPCQLHTY = {DLH} TPGQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPGQHLTY = {DHL}
+                   TPDQLHTY = {DHL} TPDQHLTY = {DHL} )
.ENDS

.SUBCKT DLTCH_P  PREB CLRB EN D Q QB DPWR DGND
+ PARAMS:    DLH = 0 DHL = 0
U1 DLTCH(1) DPWR DGND PREB CLRB EN
+ D Q QB
+ T_DLTCH IO_DIG
.MODEL T_DLTCH UGFF( TPPCQLHTY = {DLH} TPGQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPGQHLTY = {DHL}
+                   TPDQLHTY = {DHL} TPDQHLTY = {DHL} )
.ENDS

.SUBCKT DFFLOP  PREB CLRB CLK D Q QB
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 DFF(1) DPWR DGND PREB CLRB CLK
+ D Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT DFFLOP_P PREB CLRB CLK D Q QB DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0

U1 DFF(1) DPWR DGND PREB CLRB CLK
+ D Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT RSFFLOP  S  R  Q  QB
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 INV DPWR DGND R CLRBAR 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U2 INV DPWR DGND S PREBAR 
+ T_INV2 IO_DIG
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PREBAR CLRBAR DGND DGND Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )

.ENDS

.SUBCKT RSFFLOP_P   S  R  Q  QB  DPWR  DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 INV DPWR DGND R CLRBAR 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U2 INV DPWR DGND S PREBAR 
+ T_INV2 IO_DIG
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PREBAR CLRBAR DGND DGND Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )

.ENDS

.SUBCKT RSFFLOP_P2   S  R  Q  QB  DPWR  DGND DL
+ PARAMS:    DLH = 0 DHL = 0

U1 INV DPWR DGND R CLRBAR 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U2 INV DPWR DGND S PREBAR 
+ T_INV2 IO_DIG
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PREBAR CLRBAR DL DL Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT RSFFLOP_P2_S   S  R  Q  QB  DPWR  DGND DL
+ PARAMS:    DLH = 0 DHL = 0

U1 NAND(2) DPWR DGND R PREBAR CLRBAR 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U2 INV DPWR DGND S PREBAR 
+ T_INV2 IO_DIG
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PREBAR CLRBAR DL DL Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT R_S_FFLOP_P2_S   S  R  Q  QB  DPWR  DGND DL
+ PARAMS:    DLH = 0 DHL = 0
U1 OR(2) DPWR DGND R PREBAR CLR 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U2 INV DPWR DGND S PREBAR 
+ T_INV2 IO_DIG
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND S CLR DL DL Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT RSFFLOP_P2_R   S  R  Q  QB  DPWR  DGND DL
+ PARAMS:    DLH = 0 DHL = 0

U1 INV DPWR DGND R CLRBAR 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U2 NAND(2) DPWR DGND S CLRBAR PREBAR 
+ T_INV2 IO_DIG
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PREBAR CLRBAR DL DL Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT R_S_FFLOP_P2_R   S  R  Q  QB  DPWR  DGND DL
+ PARAMS:    DLH = 0 DHL = 0
U1 INV DPWR DGND R CLRBAR 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U2 OR(2) DPWR DGND S CLRBAR PRE 
+ T_INV2 IO_DIG
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PRE R DL DL Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS
 
.SUBCKT R_S_FFLOP_P   S_  R_  Q  QB  DPWR  DGND
+ PARAMS:    DLH = 0 DHL = 0

U3 DFF(1) DPWR DGND S_ R_ DGND DGND Q QB
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT R_S_FF S_ R_ Q  Q_ DPWR DGND
+ PARAMS: VTHRESS=2.5 VTHRESR=2.5 VOUTH=5.0 VOUTL=0 RIN=1E12 DELAY=10N ROUT=10
*
U3 DFF(1) DPWR DGND S_ R_ DGND DGND Q Q_
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DELAY} TPCLKQLHTY = {DELAY}
+                   TPPCQHLTY = {DELAY} TPCLKQHLTY = {DELAY} )
.ENDS R_S_FF

.SUBCKT RSFF S  R  Q  Q_ DPWR DGND
+ PARAMS:VTHRESS=2.5 VTHRESR=2.5 VOUTH=5.0 VOUTL=0 RIN=1E12 DELAY=10N ROUT=10
*
U1 INV DPWR DGND R CLRBAR 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U2 INV DPWR DGND S PREBAR 
+ T_INV2 IO_DIG
.MODEL T_INV2 UGATE()
U3 DFF(1) DPWR DGND PREBAR CLRBAR DGND DGND Q Q_
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DELAY} TPCLKQLHTY = {DELAY}
+                   TPPCQHLTY = {DELAY} TPCLKQHLTY = {DELAY} )
.ENDS  RSFF

.SUBCKT R_S_FF_A S_ R_ Q  Q_ DPWR DGND
+ PARAMS: VTHRESS=2.5 VTHRESR=2.5 VOUTH=5.0 VOUTL=0 RIN=1E12 DELAY=10N ROUT=10
*
XU1     Q DGND R_ DGND Q_ DGND   COMP2INpNANDSD
+ PARAMS: RIN={RIN} DELAY={1.1*DELAY} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES1={(VOUTH+VOUTL)/2} VTHRES2={VTHRESR}
XU2     S_ DGND Q_ DGND Q DGND   COMP2INpNANDSD
+ PARAMS: RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES1={VTHRESS} VTHRES2={(VOUTH+VOUTL)/2}
.ENDS R_S_FF

.SUBCKT RSFF_A S  R  Q  Q_ DPWR DGND
+ PARAMS:VTHRESS=2.5 VTHRESR=2.5 VOUTH=5.0 VOUTL=0 RIN=1E12 DELAY=10N ROUT=10
*
XU1     Q DGND S DGND Q_ DGND   Comp2INpNOrSD
+ PARAMS: RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES1={(VOUTH+VOUTL)/2} VTHRES2={VTHRESS}
XU2     R DGND Q_ DGND Q DGND   Comp2INpNOrSD
+ PARAMS: RIN={RIN} DELAY={1.1*DELAY} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES1={VTHRESR} VTHRES2={(VOUTH+VOUTL)/2} 
*XU2     RES DGND R DGND Q_ DGND Q DGND   Comp3INpNOrSD
*+ PARAMS: RIN={RIN} DELAY={DELAY} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES1={VTHRESR} VTHRES2={(VOUTH+VOUTL)/2} 
*+ VTHRES3={(VOUTH+VOUTL)/2}
*PULSE (<i1> <i2> <td> <tr> <tf> <pw> <per>)
*VRES RES DGND PULSE(0 {VOUTH} 0 100P 100P {4*DELAY} 1000)
.ENDS  RSFF

.SUBCKT TFFLOP  PREB CLRB CLKB T Q QB 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB T T Q QB 
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT TFFLOP_P  PREB CLRB CLKB T Q QB DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB T T Q QB 
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT THFFLOP_P  PREB CLRB CLKB DH Q QB DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
U1 JKFF(1) DPWR DGND PREB CLRB CLKB DH DH Q QB 
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT JKFF  PREB CLRB CLKB J K Q QB 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB J K Q QB 
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT JKFF_NE  PREB CLRB CLKB J K Q QB 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB J K Q QB 
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT JKFF_PE  PREB CLRB CLK J K Q QB 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
U2 INV DPWR DGND CLK CLKB 
+ T_INV IO_DIG
.MODEL T_INV UGATE()
U1 JKFF(1) DPWR DGND PREB CLRB CLKB J K Q QB 
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT JKFFLOP  PREB CLRB CLKB J K Q QB 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB J K Q QB 
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT JKFFLOP_P  PREB CLRB CLKB J K Q QB DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0

U1 JKFF(1) DPWR DGND PREB CLRB CLKB J K Q QB 
+ T_DFF IO_DIG
.MODEL T_DFF UEFF( TPPCQLHTY = {DLH} TPCLKQLHTY = {DLH}
+                   TPPCQHLTY = {DHL} TPCLKQHLTY = {DHL} )
.ENDS

.SUBCKT INV  IN OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 INV DPWR DGND IN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT INV_P  IN OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 INV DPWR DGND IN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT INV_A  IN OUT DPWR DGND  
+ PARAMS:   RIN=1E12 VOUTH=5 VOUTL=0 VTHRES=2.5
*
XU1     IN DGND OUT DGND   CompInvS 
+ PARAMS: RIN={RIN} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES={VTHRES}
.ENDS
		 
.SUBCKT INV_AD  IN OUT DPWR DGND  
+ PARAMS:    DLH = 0 DHL = 0 RIN=1E12 VOUTH=5 VOUTL=0 VTHRES=2.5
*
XU1     IN DGND OUT DGND   CompInvD 
+ PARAMS: RIN={RIN} ROUT=10 DELAYHL={DHL} DELAYLH={DLH} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES={VTHRES}
.ENDS

.SUBCKT AND2  IN1 IN2 OUT 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(2) DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AND2_P  IN1 IN2 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(2) DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS
			
.SUBCKT AND2_A  IN1 IN2 OUT DPWR DGND 
+ PARAMS:   RIN=1E12 VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
*
XU1     IN1 DGND IN2 DGND OUT DGND   Comp2INpAndS
+ PARAMS: RIN={RIN}  VOUTH={VOUTH} VOUTL={VOUTL} VTHRES1={VTHRES1} VTHRES2={VTHRES2}
.ENDS

.SUBCKT AND2_AD  IN1 IN2 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0 RIN=1E12 VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
*
XU1     IN1 DGND IN2 DGND OUT DGND   Comp2INpAndSD  
+ PARAMS: RIN={RIN}  ROUT=10 DELAY={(DLH + DHL)/2} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES1={VTHRES1} VTHRES2={VTHRES2}
.ENDS

.SUBCKT AND3  IN1 IN2 IN3 OUT 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(3) DPWR DGND IN1 IN2 IN3 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AND3_P  IN1 IN2 IN3 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(3) DPWR DGND IN1 IN2 IN3 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AND4  IN1 IN2 IN3 IN4 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(4) DPWR DGND IN1 IN2 IN3 IN4 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AND4_P  IN1 IN2 IN3 IN4 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(4) DPWR DGND IN1 IN2 IN3 IN4 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AND4_AD  IN1 IN2 IN3 IN4 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0 RIN=1E12 VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
*
XU1     IN1 DGND IN2 DGND IN3 DGND IN4 DGND OUT DGND   Comp4InpAndF 
+ PARAMS: RIN={RIN} DELAYHL={DHL} DELAYLH={DLH} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES1={VTHRES1} VTHRES2={VTHRES2}
.ENDS

.SUBCKT AND5  IN1 IN2 IN3 IN4 IN5 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(5) DPWR DGND IN1 IN2 IN3 IN4 IN5 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AND5_P  IN1 IN2 IN3 IN4 IN5 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(5) DPWR DGND IN1 IN2 IN3 IN4 IN5 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AND6  IN1 IN2 IN3 IN4 IN5 IN6 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(6) DPWR DGND IN1 IN2 IN3 IN4 IN5 IN6 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AND6_P  IN1 IN2 IN3 IN4 IN5 IN6 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 AND(6) DPWR DGND IN1 IN2 IN3 IN4 IN5 IN6 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS	

.SUBCKT XOR  IN1 IN2 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 XOR DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT XOR_P  IN1 IN2 OUT DPWR DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 XOR DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NXOR  IN1 IN2 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NXOR DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NXOR_P  IN1 IN2 OUT DPWR DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NXOR DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT OR2  IN1 IN2 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 OR(2) DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT OR2_P  IN1 IN2 OUT DPWR DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 OR(2) DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT OR3  IN1 IN2 IN3 OUT 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 OR(3) DPWR DGND IN1 IN2 IN3 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT OR3_P  IN1 IN2 IN3 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 OR(3) DPWR DGND IN1 IN2 IN3 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT OR4  IN1 IN2 IN3 IN4 OUT DPWR DGND 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 OR(4) DPWR DGND IN1 IN2 IN3 IN4 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT OR4_P  IN1 IN2 IN3 IN4 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 OR(4) DPWR DGND IN1 IN2 IN3 IN4 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NAND2  IN1 IN2 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NAND(2) DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NAND2_P  IN1 IN2 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NAND(2) DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NAND3  IN1 IN2 IN3 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NAND(3) DPWR DGND IN1 IN2 IN3 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NAND3_P  IN1 IN2 IN3 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NAND(3) DPWR DGND IN1 IN2 IN3 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NAND4  IN1 IN2 IN3 IN4 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NAND(4) DPWR DGND IN1 IN2 IN3 IN4 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NAND4_P  IN1 IN2 IN3 IN4 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NAND(4) DPWR DGND IN1 IN2 IN3 IN4 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS  

.SUBCKT NAND5  IN1 IN2 IN3 IN4 IN5 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NAND(5) DPWR DGND IN1 IN2 IN3 IN4 IN5 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NAND5_P  IN1 IN2 IN3 IN4 IN5 OUT DPWR DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NAND(5) DPWR DGND IN1 IN2 IN3 IN4 IN5 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS


.SUBCKT NOR2  IN1 IN2 OUT 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NOR(2) DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NOR2_P  IN1 IN2 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NOR(2) DPWR DGND IN1 IN2 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS
	   
.SUBCKT NOR2_A  IN1 IN2 OUT DPWR DGND 
*
XU1     IN1 DGND IN2 DGND OUT DGND   Comp2INpNORS 
+ PARAMS: RIN=1E12 VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
.ENDS

.SUBCKT NOR2_AD  IN1 IN2 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
XU1     IN1 DGND IN2 DGND OUT DGND   Comp2INpNORSD 
+ PARAMS: RIN=1E12 ROUT=10 DELAY={(DLH + DHL)/2} VOUTH=5 VOUTL=0 VTHRES1=2.5 VTHRES2=2.5
.ENDS

.SUBCKT NOR3  IN1 IN2 IN3 OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NOR(3) DPWR DGND IN1 IN2 IN3 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT NOR3_P  IN1 IN2 IN3 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NOR(3) DPWR DGND IN1 IN2 IN3 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS	   

.SUBCKT NOR4  IN1 IN2 IN3 IN4 OUT 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NOR(4) DPWR DGND IN1 IN2 IN3 IN4 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS
		 
.SUBCKT NOR4_P  IN1 IN2 IN3 IN4 OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 NOR(4) DPWR DGND IN1 IN2 IN3 IN4 OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT BUF  IN OUT 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 BUF DPWR DGND IN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT BUF_P  IN OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0
*
U1 BUF DPWR DGND IN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS   

.SUBCKT BUF_A  IN OUT DPWR DGND 
+ PARAMS:   RIN=1E12 VOUTH=5 VOUTL=0 VTHRES=2.5
*
XU1     IN DGND OUT DGND   CompGndRefS 
+ PARAMS: RIN={RIN} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES={VTHRES}
.ENDS

.SUBCKT BUF_AD  IN OUT DPWR DGND  
+ PARAMS:    DLH = 0 DHL = 0 RIN=1E12 VOUTH=5 VOUTL=0 VTHRES=2.5
*
XU1     IN DGND OUT DGND   CompGndRefS_THL 	  
+ PARAMS: RIN={RIN} ROUT=10 DELAYHL={DHL} DELAYLH={DLH} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES={VTHRES}
*XU1     IN DGND OUT DGND   CompSD 	  
*+ PARAMS: RIN={RIN} ROUT=10 DELAY={(DHL+DLH)/2} VOUTH={VOUTH} VOUTL={VOUTL} VTHRES={VTHRES}
.ENDS 

.SUBCKT BUF3  IN EN OUT
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 BUF3 DPWR DGND IN EN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UTGATE( TPLHTY={DLH} TPHLTY={DHL} 
+                     TPZHTY={DLH} TPZLTY={DHL} 
+                     TPLZTY={DLH} TPHZTY={DHL} )
.ENDS

.SUBCKT BUF3_P  IN EN OUT DPWR DGND
+ PARAMS:    DLH = 0 DHL = 0
*
U1 BUF3 DPWR DGND IN EN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UTGATE( TPLHTY={DLH} TPHLTY={DHL} 
+                     TPZHTY={DLH} TPZLTY={DHL} 
+                     TPLZTY={DLH} TPHZTY={DHL} )
.ENDS

.SUBCKT AD_BUF   IN OUT 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0 IN_LOW=0.475 IN_HIGH=0.525 
*
U1 BUF DPWR DGND IN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT AD_BUF_P   IN OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0 IN_LOW=0.475 IN_HIGH=0.525 
*
U1 BUF DPWR DGND IN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT DA_BUF   IN OUT 
+ OPTIONAL: DPWR=$G_DPWR DGND=$G_DGND
+ PARAMS:    DLH = 0 DHL = 0 OUT_LOW=0.0 OUT_HIGH=1.0 
*
U1 BUF DPWR DGND IN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT DA_BUF_P   IN OUT DPWR DGND 
+ PARAMS:    DLH = 0 DHL = 0 OUT_LOW=0.0 OUT_HIGH=1.0 ROUT=1  COUT=0
*
U1 BUF DPWR DGND IN OUT 
+ T_GATE IO_DIG
.MODEL T_GATE UGATE( TPLHTY={DLH} TPHLTY={DHL} )
.ENDS

.SUBCKT LEB  IN OUT
+ OPTIONAL: PWR=$G_DPWR GND=$G_DGND
+ PARAMS:    LEB = 100N
XU1         IN 5 PWR GND BUF_P
+ PARAMS: DLH={LEB} DHL={1N}
XU2         IN 5 OUT PWR GND AND2_P
+ PARAMS: DLH=0N DHL=0N 
.ENDS

.SUBCKT LEB_P  IN GND OUT PWR
+ PARAMS:    LEB = 100N
XU1         IN 5 PWR GND BUF_P
+ PARAMS: DLH={LEB} DHL={1N}
XU2         IN 5 OUT PWR GND AND2_P
+ PARAMS: DLH=0N DHL=0N 
.ENDS

.SUBCKT ONESHOT  IN OUT
+ OPTIONAL: PWR=$G_DPWR GND=$G_DGND
+ PARAMS:    PW = 100N
XU1         IN 5 PWR GND INV_P
+ PARAMS: DLH={1N} DHL={PW}
XU2         IN 5 OUT PWR GND AND2_P
+ PARAMS: DLH=0N DHL=0N 
.ENDS

.SUBCKT ONESHOT_P  IN GND OUT PWR
+ PARAMS:    PW = 100N
XU1         IN 5 PWR GND INV_P
+ PARAMS: DLH={1N} DHL={PW}
XU2         IN 5 OUT PWR GND AND2_P
+ PARAMS: DLH=0N DHL=0N 
.ENDS

.SUBCKT ONESHOT_DEL  IN OUT
+ OPTIONAL: PWR=$G_DPWR GND=$G_DGND
+ PARAMS:    PW = 50N DEL=100N
XU3         IN 1 PWR GND BUF_DP
+ PARAMS: DLH={DEL} DHL={DEL}
XU1         1 2 PWR GND INV_DP
+ PARAMS: DLH={1N} DHL={PW}
XU2         1 2 OUT PWR GND AND2_DP
+ PARAMS: DLH=0N DHL=0N 
.ENDS

.SUBCKT ONESHOT_DEL_P  IN GND OUT PWR
+ PARAMS:    PW = 50N DEL=100N
XU3         IN 1 PWR GND BUF_DP
+ PARAMS: DLH={DEL} DHL={DEL}
XU1         1 2 PWR GND INV_DP
+ PARAMS: DLH={1N} DHL={PW}
XU2         1 2 OUT PWR GND AND2_DP
+ PARAMS: DLH=0N DHL=0N 
.ENDS

.SUBCKT ONESHOTE IN RES OUT DH
+ OPTIONAL: PWR=$G_DPWR GND=$G_DGND
+ PARAMS:    PW = 100n
XU1         OUT RES CB PWR GND NOR2_P
+ PARAMS: DLH={1N} DHL={PW} 
XU37        DH CB IN DH OUT 7 PWR GND DFFLOP_P
+ PARAMS: DLH=0N DHL=0N
.ENDS

.SUBCKT ONESHOTE_DEL IN RES OUT DH
+ OPTIONAL: PWR=$G_DPWR GND=$G_DGND
+ PARAMS:    PW = 100n DEL=100n
XU3         IN 1 PWR GND BUF_P
+ PARAMS: DLH={DEL} DHL={1N}
XU1         OUT RES CB PWR GND NOR2_P
+ PARAMS: DLH={1N} DHL={PW} 
XU2         DH CB 1 DH OUT 7 PWR GND DFFLOP_P
+ PARAMS: DLH=0N DHL=0N
.ENDS

.SUBCKT ONESHOTE_P IN RES GND OUT PWR DH
+ PARAMS:    PW = 100n
XU1         OUT RES CB PWR GND NOR2_P
+ PARAMS: DLH={1N} DHL={PW} 
XU37        DH CB IN DH OUT 7 PWR GND DFFLOP_P
+ PARAMS: DLH=0N DHL=0N
.ENDS

.SUBCKT ONESHOTE_DEL_P IN RES GND OUT PWR DH
+ PARAMS:    PW = 100n DEL=100n
XU3         IN 1 PWR GND BUF_P
+ PARAMS: DLH={DEL} DHL={1N}
XU1         OUT RES CB PWR GND NOR2_P
+ PARAMS: DLH={1N} DHL={PW} 
XU2         DH CB 1 DH OUT 7 PWR GND DFFLOP_P
+ PARAMS: DLH=0N DHL=0N
.ENDS

.SUBCKT DELAY IN OUT
+ OPTIONAL: PWR=$G_DPWR GND=$G_DGND
+ PARAMS:    DEL = 100n
XU1         IN OUT PWR GND BUF_P
+ PARAMS: DLH={DEL} DHL={DEL}
.ENDS

.SUBCKT DELAY_P IN GND OUT PWR
+ PARAMS:    DEL = 100n
XU1         IN OUT PWR GND BUF_P
+ PARAMS: DLH={DEL} DHL={DEL}
.ENDS
	 
* OPERATIONAL AMPLIFIER MACROMODEL SUBCIRCUIT
* CREATED 08/05/06
* (REV 1.3 26/02/08 )
.SUBCKT OPAMP  INp INm Vp Vm OUT
+ PARAMS: GAIN=200K RIN=2MEG RINC=1E9 ROUT=75 SLEWRATE=500K FPOLE1=5 FPOLE2=1MEG 
+         VDROPOH=1.9 VDROPOL=1.9 VOFFS=1M IBIAS=80N IOFFS=20N 
*
.PARAM PI = 3.141592
.PARAM IS = 1.0E-12
.PARAM N = 0.1
.PARAM VT = 0.02585
.PARAM IMAX = 100.0E-2
.PARAM C1 = {IMAX/SLEWRATE}
.PARAM R1 = {1/(2*PI*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM R2 = 100
.PARAM G2 = {1/R2}
.PARAM GOUT = {1/ROUT}
.PARAM C2 = {1/(2*PI*R2*FPOLE2)}
.PARAM VDF = {N*VT*LOG(1 + IMAX/IS)}
*
IBIASM      INm 8  {IBIAS - IOFFS}
RINm      INm  8  {2*RINC}
RINp      INp  8  {2*RINC}
IBIAS       10 8   {IBIAS}
VOFFS       10 INp  {VOFFS}
EVp VpI 0 Vp 0 1
EVm VmI 0 Vm 0 1
VC          VpI 11  {VDROPOH + VDF}
VE          12 VmI  {VDROPOL + VDF}
RP          Vp Vm  15E3
ROUT        OUT 8  {ROUT}
GMO         8 OUT 9 8 {GOUT}
C2          9 8  {C2}
R2          9 8  {R2}
GM2         8 9 7 8 {G2}
RIN         INm 10  {RIN}
EGND        8  0  POLY(2) (Vp,0) (Vm,0) 0 .5 .5
D3         12 7  D_1
D2          7 11  D_1
C1          7 8  {C1}
R1          7 8  {R1}
GM1         8 7 VALUE = { LIMIT( GM1*V(10,INm), -IMAX, IMAX) }
.MODEL D_1 D( IS={IS} N = {N})
.ENDS

* OPERATIONAL AMPLIFIER MACROMODEL SUBCIRCUIT
* CREATED 18/12/08
* (REV 1.0 18/12/08 )
.SUBCKT OPAMPGndRefS  INP INM GND OUT
+ PARAMS: GAIN=200K RIN=2MEG RINC=1E9 ROUT=75 SLEWRATE=500K FPOLE1=5 FPOLE2=1MEG 
+         VOUTH=10 VOUTL=0 VOFFS=1M IBIAS=80N IOFFS=20N VOUTOFFS=0
*
.PARAM PI = 3.141592
.PARAM COUT = {1/(2*PI*ROUT*FPOLE1)}
*
IBIASM      INM GND  {IBIAS - IOFFS}
RINM      INm  GND  {2*RINC}
RINP      INP  GND  {2*RINC}
IBIAS       10 GND   {IBIAS}
VOFFS       10 INP  {VOFFS}
RIN         INM 10  {RIN}
E1         OUT0 GND  VALUE = { LIMIT( GAIN*V(10,INM) + VOUTOFFS, VOUTH, VOUTL) }
ROUT       OUT0  OUT   {ROUT}
COUT        OUT GND  {COUT}
.ENDS

* OPERATIONAL AMPLIFIER MACROMODEL SUBCIRCUIT
* CREATED 15/09/08
* (REV 1.0 15/09/08 )
.SUBCKT OPAMPGndRef  INp INm GND OUT
+ PARAMS: GAIN=200K RIN=2MEG RINC=1E9 ROUT=75 SLEWRATE=500K FPOLE1=5 FPOLE2=1MEG 
+         VOUTH=10 VOUTL=0 VOFFS=1M IBIAS=80N IOFFS=20N 
*
.PARAM Pi = 3.141592
.PARAM IS = 1.0E-12
.PARAM N = 0.1
.PARAM VT = 0.02585
.PARAM IMAX = 100.0E-2
.PARAM C1 = {IMAX/SLEWRATE}
.PARAM R1 = {1/(2*Pi*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM R2 = 100
.PARAM G2 = {1/R2}
.PARAM GOUT = {1/ROUT}
.PARAM C2 = {1/(2*Pi*R2*FPOLE2)}
.PARAM VDF = {N*VT*LOG(1 + IMAX/IS)}
*
IBIASM      INm GND  {IBIAS - IOFFS}
RINm      INm  GND  {2*RINC}
RINp      INp  GND  {2*RINC}
IBIAS       10 GND   {IBIAS}
VOFFS       10 INp  {VOFFS}

VC          11 GND {VOUTH - VDF}
VE          GND 12  {VOUTL - VDF}
ROUT        OUT GND  {ROUT}
GMO         GND OUT  VALUE = {GOUT*V( 9,GND)}
C2          9 GND  {C2}
R2          9 GND  {R2}
GM2         GND 9 VALUE = {G2*V( 7,GND)}
RIN         INm 10  {RIN}
D3         12 7  D_1
D2          7 11  D_1
C1          7 GND  {C1}
R1          7 GND  {R1}
GM1         GND 7 VALUE = { LIMIT( GM1*V(10,INm), -IMAX, IMAX) }
.MODEL D_1 D( IS={IS} N = {N})
.ENDS


* COMPARATOR MACROMODEL SUBCIRCUIT
* CREATED 15/09/08
* (REV 1.0 15/09/08 )
.SUBCKT COMPARATOR  INp INm Vp Vm OUT
+ PARAMS: GAIN=200K RIN=2MEG RINC=1E9 ROUT=75 SLEWRATE=500K DELAY=0
+         VDROPOH=1.9 VDROPOL=1.9 VOFFS=1M IBIAS=80N IOFFS=20N VTHRES=0 VHYST=0
*
.PARAM PI = 3.141592
.PARAM IS = 1.0E-12
.PARAM N = 0.1
.PARAM VT = 0.02585
.PARAM IMAX = 100.0E-2
.PARAM G_SRMULT = 10
.PARAM DEL = {IF ( DELAY < 1N, 1N, DELAY ) } 
.PARAM SR = { IF ( SLEWRATE < 1e-6, G_SRMULT*5/DEL, SLEWRATE ) }
.PARAM C1 = {IMAX/SR}
.PARAM G_PMULT = 100
.PARAM FPOLE1 = G_PMULT*SR/(2*pi*5)/Gain
.PARAM R1 = {1/(2*PI*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM GOUT = {1/ROUT}
.PARAM VDF = {N*VT*LOG(1 + IMAX/IS)}
.PARAM VDH = {VDROPOH - IMAX*DEL/C1}
.PARAM VDL = {VDROPOL + IMAX*DEL/C1}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}

*
IBIASM      INm 8  {IBIAS - IOFFS}
RINm      INm  8  {2*RINC}
RINp      INp  8  {2*RINC}
IBIAS       10 8   {IBIAS}
VOFFS       10 INp  {VOFFS}
EVp VpI 0 Vp 0 1
EVm VmI 0 Vm 0 1
VC          VpI 11  {VDH + VDF}
VE          12 VmI  {VDL + VDF}
RP          Vp Vm  15E3
ROUT        OUT 8  {ROUT}
GMO         8 OUT VALUE = {GOUT*LIMIT( V(7,8), V(VmI,0)+VDL, V(VpI,0)-VDH)}
RIN         INm 10  {RIN}
EGND        8  0  POLY(2) (Vp,0) (Vm,0) 0 .5 .5
D3         12 7  D_1
D2          7 11  D_1
C1          7 8  {C1}
R1          7 8  {R1}

Ethr thr 0 Value= { IF ( V(out,8) < V(8,0), {VthH}, {VthL}) }
GM1         8 7 VALUE = { LIMIT( GM1*(V(10,INm)-V(thr,0)), -IMAX, IMAX) }
.MODEL D_1 D( IS={IS} N = {N})
.ENDS

* COMPARATOR MACROMODEL SUBCIRCUIT
* CREATED 15/09/08
* (REV 1.1 24/09/16 )
.SUBCKT COMPARGndRef  INp INm OUT GND
+ PARAMS: GAIN=200K RIN=1E12 RINC=1E12 ROUT=75 SLEWRATE=500K DELAY=0
+         VOUTH=5 VOUTL=0 VOFFS=1M IBIAS=80N IOFFS=20N VTHRES=0 VHYST=0
*
.PARAM PI = 3.141592
.PARAM IS = 1.0E-12
.PARAM N = 0.1
*.PARAM VT = 0.02585
.PARAM IMAX = 100.0E-2
*.PARAM G_SRMULT = 10
.PARAM G_SRMULT = 12
.PARAM ROUT_ = {IF ( ROUT < 1m, 1m, ROUT ) } 
.PARAM DEL = {IF ( DELAY < 1N, 1N, DELAY ) } 
.PARAM SR = { IF ( SLEWRATE < 1e-6, G_SRMULT*5/DEL, SLEWRATE ) }
.PARAM C1 = {IMAX/SR}
.PARAM G_PMULT = 100
.PARAM FPOLE1= {G_PMULT*SR/(2*PI*5)/GAIN};
.PARAM R1 = {1/(2*PI*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM GOUT = {1/ROUT_}
.PARAM VDF = {N*VT*LOG(1 + IMAX/IS)}
.PARAM VOH = {VOUTH + IMAX*DEL/C1}
.PARAM VOL = {VOUTL - IMAX*DEL/C1}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param VoutM={(VoutH+VoutL)/2}
*
IBIASM      INm GND  {IBIAS - IOFFS}
RINm      INm  GND  {2*RINC}
RINp      INp  GND  {2*RINC}
IBIAS       10 GND   {IBIAS}
VOFFS       10 INp  {VOFFS}
VC          11 GND {VOH - VDF}
VE          12 GND  {VOL + VDF}

ROUT        OUT GND  {ROUT_}
GMO         GND OUT VALUE = {GOUT*LIMIT( V(7,GND), VOUTL, VOUTH)}
RIN         INm 10  {RIN}
D3         12 7  D_1
D2          7 11  D_1
C1          7 GND  {C1}
R1          7 GND  {R1}

*Ethr        thr 0 Value= { IF ( V(out,GND) < {VoutM}, {VthH}, {VthL}) }
Gthr        0  thr Value= { IF ( V(out,GND) < {VoutM}, {VthH}, {VthL}) }
Rthr        thr 0 1

GM1         GND 7 VALUE = { LIMIT( GM1*(V(10,INm)-V(thr,0)), -IMAX, IMAX) }
.MODEL D_1 D( IS={IS} N = {N})
.ENDS

* SIMPLIFIED COMPARATOR MACROMODEL SUBCIRCUIT
* CREATED 24/09/16
* (REV 1.1 24/09/16 )
.SUBCKT COMPARGndRefS_0  INp INm OUT GND
+ PARAMS: RIN=1E12 RINC=1E12 ROUT=10 DELAY=0
+         VOUTH=5 VOUTL=0 VTHRES=0 VHYST=0
* VOFFS=1M IBIAS=80N IOFFS=20N 
*
.PARAM PI = 3.141592
.PARAM IS = 1.0E-12
.PARAM N = 0.1
*.PARAM VT = 0.02585
.PARAM IMAX = 100.0E-2
.PARAM G_SRMULT = 12
.PARAM ROUT_ = {IF ( ROUT < 1, 1, ROUT ) } 
.PARAM DEL = {IF ( DELAY < 1N, 1N, DELAY ) } 
.PARAM SLEWRATE=0
.PARAM SR = { IF ( SLEWRATE < 1e-6, G_SRMULT*5/DEL, SLEWRATE ) }
.PARAM C1 = {IMAX/SR}
.PARAM G_PMULT = 100
.PARAM GAIN=200K
.PARAM FPOLE1= {G_PMULT*SR/(2*PI*5)/GAIN};
.PARAM R1 = {1/(2*PI*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM GOUT = {1/ROUT_}
.PARAM VDF = {N*VT*LOG(1 + IMAX/IS)}
.PARAM VOH = {VOUTH + IMAX*DEL/C1}
.PARAM VOL = {VOUTL - IMAX*DEL/C1}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param VoutM={(VoutH+VoutL)/2}
*
RINm      INm  GND  {2*RINC}
RINp      INp  GND  {2*RINC}
VC          11 GND {VOH - VDF}
VE          12 GND  {VOL + VDF}

ROUT        OUT GND  {ROUT_}
GMO         GND OUT VALUE = {GOUT*LIMIT( V(7,GND), VOUTL, VOUTH)}
RIN         INm INp  {RIN}
D3         12 7  D_1
D2          7 11  D_1
C1          7 GND  {C1}
R1          7 GND  {R1}

*Ethr        thr 0 Value= { IF ( V(out,GND) < {VoutM}, {VthH}, {VthL}) }
Gthr        0  thr Value= { IF ( V(out,GND) < {VoutM}, {VthH}, {VthL}) }
Rthr        thr 0 1

*GM1         GND 7 VALUE = { LIMIT( GM1*(V(INp,INm)-V(thr,0)), -IMAX, IMAX) }
GM1         GND 7 VALUE = { IF ( (V(INp,INm) < V(thr,0)), -IMAX, IMAX) }

.MODEL D_1 D( IS={IS} N = {N})
.ENDS

* SIMPLIFIED COMPARATOR MACROMODEL SUBCIRCUIT
* CREATED 24/09/16
* (REV 1.1 24/09/16 )
.SUBCKT COMPARGndRefS  INp INm OUT GND
+ PARAMS: RIN=1E12 RINC=1E12 ROUT=10 DELAYLH=0 DELAYHL=0
+         VOUTH=5 VOUTL=0 VTHRES=0 VHYST=0
* VOFFS=1M IBIAS=80N IOFFS=20N 
*
.PARAM PI = 3.141592
.PARAM IS = 1.0E-12
.PARAM N = 0.1
*.PARAM VT = 0.02585
.PARAM IMAX = 100.0E-2
.PARAM G_SRMULT = 12
.PARAM ROUT_ = {IF ( ROUT < 1, 1, ROUT ) } 
.PARAM DEL_LH = {IF ( DELAYLH < 1N, 1N, DELAYLH ) } 
.PARAM DEL_HL = {IF ( DELAYHL < 1N, 1N, DELAYHL ) }
.PARAM DELM = { (DEL_LH + DEL_HL)/2 }
.PARAM SLEWRATE=0
.PARAM SR = { IF ( SLEWRATE < 1e-6, G_SRMULT*5/DELM, SLEWRATE ) }
.PARAM C1 = {IMAX/SR}
.PARAM G_PMULT = 100
.PARAM GAIN=200K
.PARAM FPOLE1= {G_PMULT*SR/(2*PI*5)/GAIN};
.PARAM R1 = {1/(2*PI*C1*FPOLE1)}
.PARAM GM1 = {GAIN/R1}
.PARAM GOUT = {1/ROUT_}
.PARAM VDF = {N*VT*LOG(1 + IMAX/IS)}
.PARAM VOH = {VOUTH + IMAX*DEL_HL/C1}
.PARAM VOL = {VOUTL - IMAX*DEL_LH/C1}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param VoutM={(VoutH+VoutL)/2}
*
RINm      INm  GND  {2*RINC}
RINp      INp  GND  {2*RINC}
VC          11 GND {VOH - VDF}
VE          12 GND  {VOL + VDF}

ROUT        OUT GND  {ROUT_}
GMO         GND OUT VALUE = {GOUT*LIMIT( V(7,GND), VOUTL, VOUTH)}
RIN         INm INp  {RIN}
D3         12 7  D_1
D2          7 11  D_1
C1          7 GND  {C1}
R1          7 GND  {R1}

*Ethr        thr 0 Value= { IF ( V(out,GND) < {VoutM}, {VthH}, {VthL}) }
Gthr        0  thr Value= { IF ( V(out,GND) < {VoutM}, {VthH}, {VthL}) }
Rthr        thr 0 1

*GM1         GND 7 VALUE = { LIMIT( GM1*(V(INp,INm)-V(thr,0)), -IMAX, IMAX) }
GM1         GND 7 VALUE = { IF ( (V(INp,INm) < V(thr,0)), -IMAX, IMAX) }

.MODEL D_1 D( IS={IS} N = {N})
.ENDS

********************************************
**        Oscillator SW                   **
**  This file was created by TINA         **
**    (c) 2008 DesignSoft, Inc.           **
********************************************

.SUBCKT VCOscillator INp INm Gnd OutRamp OutSqr 
+ PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 DUTYCYC=0.5 RISETIME=1E-9 FALLTIME=1E-9 
+ VOUTH=5 VOUTL=0 INLLIM=-1E12 INULIM=1E12
.PARAM VHYST = {(VOUTH-VOUTL)/2}
.PARAM VOUTM = {(VOUTH+VOUTL)/2}
.PARAM COsc = 1000P
.PARAM FREQ = {CENTFREQ+CONVGAIN}
.PARAM T = { 1/FREQ }
*.PARAM DEL = 1N
.PARAM DEL = {MinADel}
*.PARAM ROsc = { (T-DEL)/COsc*(1-DUTYCYC) }
.PARAM ROsc = { Max((T-DEL), Del)/COsc*(1-DUTYCYC) }
.PARAM IOsc = { 2*VHYST/ROsc }
*.PARAM ROscF = { (DUTYCYC*T-DEL)/(COsc) }
.PARAM ROscF = { Max((DUTYCYC*T-DEL), Del)/(COsc) }
.PARAM IOscF = { -2*VHYST/ROscF }
.PARAM Mf { CONVGAIN/FREQ } 
*FREQ = CENTFREQ + CONVGAIN*V(INp,INm)
*FREQ = CENTFREQ + CONVGAIN + CONVGAIN*(V(INp,INm) - 1)
*FREQ0 = CENTFREQ + CONVGAIN
*FREQ/FREQ0 = 1 + CONVGAIN*(V(INp,INm) - 1)/(CENTFREQ + CONVGAIN)
*.PARAM VENTHRES=0.5
.PARAM VENTHRES={2.5}
.PARAM RAMPSHIFT=0.01

VEN En Gnd PULSE(0 {2*VENTHRES} 1N 100P 100P 1e9 1e12)
*GEn Gnd En Value = {IF (V(INp,INm) > INLLIM, {2*VENTHRES}, 0)}
*REn Gnd En 1
GCtrl Gnd Ctrl Value = {Limit(V(INp,INm), INLLIM, INULIM)}
RCtrl Gnd Ctrl 1

GIOsc       Gnd Ramp VALUE = {IF( (V(En,Gnd) > VENTHRES), IF (V(OutSqr,Gnd) < VOUTM, 
+ IOsc*(1+ Mf*(V(Ctrl,Gnd) - 1)), IOscF*(1+ Mf*(V(Ctrl,Gnd) - 1))), 0)}
XOscComp     Ramp Gnd En Gnd OutSqr Gnd   COMP2INpAND
+ PARAMS: VTHRES1={VHYST+RAMPSHIFT} VTHRES2={VENTHRES} VOUTH={VOUTH} VOUTL={VOUTL} RIN=1E12 
+ DELAY= {DEL} VHYST1={VHYST} VHYST2=0
SWEn       Ramp Gnd En Gnd  S_VSWITCH_2
COsc        Ramp Gnd {COsc} IC=0
*.MODEL S_VSWITCH_2 VSWITCH (RON=1 ROFF=1G VON={VENTHRES-0.1*(VOUTH - VOUTL)} 
*+ VOFF={VENTHRES+0.1*(VOUTH - VOUTL)} )
.MODEL S_VSWITCH_2 VSWITCH (RON=1 ROFF=1G VON={VENTHRES-0.1*VENTHRES} 
+ VOFF={VENTHRES+0.1*VENTHRES} )
GRamp Gnd OutRamp Value = {V(Ramp,Gnd) + (VOUTL-RAMPSHIFT)}
RRamp Gnd OutRamp 1
.ENDS

.SUBCKT VCOscillatorSin INp INm Gnd OutSin OutRamp OutSqr 
+ PARAMS: CENTFREQ=1E3 CONVGAIN=1E3 DUTYCYC=0.5 RISETIME=1E-9 FALLTIME=1E-9 
+ VOUTH=5 VOUTL=0 INLLIM=-1E12 INULIM=1E12
.PARAM VHYST = {(VOUTH-VOUTL)/2}
.PARAM VOUTM = {(VOUTH+VOUTL)/2}
.PARAM COsc = 1000P
.PARAM FREQ = {CENTFREQ+CONVGAIN}
.PARAM T = { 1/FREQ }
*.PARAM DEL = 1N
.PARAM DEL = {MinADel}
*.PARAM ROsc = { (T-DEL)/COsc*(1-DUTYCYC) }
.PARAM ROsc = { Max((T-DEL), Del)/COsc*(1-DUTYCYC) }
.PARAM IOsc = { 2*VHYST/ROsc }
*.PARAM ROscF = { (DUTYCYC*T-DEL)/(COsc) }
.PARAM ROscF = { Max((DUTYCYC*T-DEL), Del)/(COsc) }
.PARAM IOscF = { -2*VHYST/ROscF }
.PARAM Mf { CONVGAIN/FREQ } 
*FREQ = CENTFREQ + CONVGAIN*V(INp,INm)
*FREQ = CENTFREQ + CONVGAIN + CONVGAIN*(V(INp,INm) - 1)
*FREQ0 = CENTFREQ + CONVGAIN
*FREQ/FREQ0 = 1 + CONVGAIN*(V(INp,INm) - 1)/(CENTFREQ + CONVGAIN)
.PARAM PI = 3.14159, SIN_C = {PI/(2*VHYST)}
*.PARAM VENTHRES=0.5
.PARAM VENTHRES={2.5}
.PARAM RAMPSHIFT=0.01

VEN En Gnd PULSE(0 {2*VENTHRES} 1N 100P 100P 1e9 1e12)
*GEn Gnd En Value = {IF (V(INp,INm) > INLLIM, {2*VENTHRES}, 0)}
*REn Gnd En 1
GCtrl Gnd Ctrl Value = {Limit(V(INp,INm), INLLIM, INULIM)}
RCtrl Gnd Ctrl 1

GIOsc       Gnd Ramp VALUE = {IF( (V(En,Gnd) > VENTHRES), IF (V(OutSqr,Gnd) < VOUTM, 
+ IOsc*(1+ Mf*(V(Ctrl,Gnd) - 1)), IOscF*(1+ Mf*(V(Ctrl,Gnd) - 1))), 0)}
*.Subckt Comp2INpAnd IN1p IN1m IN2p IN2m OUT GND
*+ Params: RIN=1E12 DELAY=10N VOUTH=5 VOUTL=0 VTHRES1=2.5 VHYST1=0 VTHRES2=2.5 VHYST2=0 
XOscComp     Ramp Gnd En Gnd OutSqr Gnd   COMP2INpAND
+ PARAMS: VTHRES1={VHYST+RAMPSHIFT} VTHRES2={VENTHRES} VOUTH={VOUTH} VOUTL={VOUTL} RIN=1E12 
+ DELAY= {DEL} VHYST1={VHYST} VHYST2=0
SWEn       Ramp Gnd En Gnd  S_VSWITCH_2
COsc        Ramp Gnd {COsc} IC=0
*.MODEL S_VSWITCH_2 VSWITCH (RON=1 ROFF=1G VON={VENTHRES-0.1*(VOUTH - VOUTL)} 
*+ VOFF={VENTHRES+0.1*(VOUTH - VOUTL)} )
.MODEL S_VSWITCH_2 VSWITCH (RON=1 ROFF=1G VON={VENTHRES-0.1*VENTHRES} 
+ VOFF={VENTHRES+0.1*VENTHRES} )
GRamp Gnd OutRamp Value = {V(Ramp,Gnd) + (VOUTL-RAMPSHIFT)}
RRamp Gnd OutRamp 1
GSine Gnd OutSin Value = {VHYST*Sin(SIN_C*(V(Ramp,Gnd) - (VHYST+RAMPSHIFT)))+VOUTM}
RSine Gnd OutSin 1
.ENDS

.SUBCKT Oscillator En Gnd OutRamp OutSqr
+ PARAMS: FREQ=600K DUTYCYC=0.018 RISETIME=1E-9 FALLTIME=1E-9 
+ VOUTH=5 VOUTL=0 VENTHRES=2.5
.PARAM VHYST = {(VOUTH-VOUTL)/2}
.PARAM COsc = 1000P
.PARAM T = { 1/FREQ }
*.PARAM DEL = 1N
.PARAM DEL = {MinADel}
*.PARAM ROsc = { 1/(FREQ*COsc)*(1-DUTYCYC) }
*.PARAM ROsc = { (T-DEL)/COsc*(1-DUTYCYC) }
.PARAM ROsc = { Max((T-DEL), Del)/COsc*(1-DUTYCYC) }
.PARAM IOsc = { 2*VHYST/ROsc }
*.PARAM SWRon = { -DUTYCYC/(FREQ*(COsc*log(1-2*VHYST/(2*VHYST+100m)))) }
*.PARAM SWRon = { MAX(-(DUTYCYC*T-DEL)/(COsc*log(1-2*VHYST/(2*VHYST+100m))), 100m) }
.PARAM SWRon = { MAX(-Max((DUTYCYC*T-DEL),DEL)/(COsc*log(1-2*VHYST/(2*VHYST+100m))), 100m) }
*

GIOsc       Gnd OutRamp VALUE = {IF( (V(En,Gnd)>VENTHRES) & (V(OutSqr,Gnd)<VENTHRES), IOsc, 0)}
XOscComp     OutRamp Gnd En Gnd OutSqr Gnd   COMP2INpAND
+ PARAMS: VTHRES1={VHYST+100m} VTHRES2={VENTHRES} VOUTH={VOUTH} VOUTL={VOUTL} RIN=1E12 
+ DELAY= {DEL} VHYST1={VHYST} VHYST2=0
SWOsc       OutRamp Gnd OutSqr Gnd  S_VSWITCH_1
SWEn       OutRamp Gnd En Gnd  S_VSWITCH_2
COsc        OutRamp Gnd {COsc} IC=0
.MODEL S_VSWITCH_1 VSWITCH (RON={SWRon} ROFF=1G VON={0.6*VOUTH + 0.4*VOUTL} 
+ VOFF={0.4*VOUTH + 0.6*VOUTL} )
.MODEL S_VSWITCH_2 VSWITCH (RON={1} ROFF=1G VON={VENTHRES-0.1*(VOUTH - VOUTL)} 
+ VOFF={VENTHRES+0.1*(VOUTH - VOUTL)} )
.ENDS

* CONNECTIONS:   A
*                             |    C
*                             |    |
.SUBCKT D_D       1    2
D1 1 2  DD
.MODEL DD D( IS=1P N=1.0)
.ENDS D_D 

*.Param MinADel=1N
.Param MinADel=100p
.SUBCKT HYSTCOMP  INP INM OUT GND 
+ PARAMS: VTHRES=0 VHYST=1 VOUTH=5 VOUTL=0 ROUT=1 TDEL=1N
*
.PARAM DELAY = {MAX(TDEL,MinADel)}
.PARAM RDEL = {IF ( (DELAY > 1E-15) & (ROUT < 1), 1, ROUT ) }
.PARAM VOUTM={(VOUTH+VOUTL)/2}
.PARAM VTHH={VTHRES+VHYST}
.PARAM VTHL={VTHRES-VHYST}
.PARAM COUT={DELAY/(0.693*(RDEL+1U))}
*
Rinp inp gnd 1G
Rinm inm gnd 1G
ETHR THR GND VALUE= { IF ( V(OUT,GND) < {VOUTM}, {VTHH}, {VTHL}) }
EOUT OUT GND VALUE= { IF ( V(INP,INM) > V(THR,GND), VOUTH + RDEL*I(EOUT) , VOUTL + RDEL*I(EOUT)  ) }
COUT OUT GND {COUT}
.ENDS

.SUBCKT HYSTCOMP_THL inp inm out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N
X1 inp inm out gnd HYSTCOMPE_THL Params: Vthres={Vthres} Vhyst={Vhyst} VoutH={VoutH} VoutL={VoutL} 
+ Rout={Rout} Tdlh={Tdlh} Tdhl={Tdhl}
.ENDS

.SUBCKT HYSTCOMPG_THL inp inm out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N
*
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) }
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Cout={Sqrt(Tdelhl*Tdellh)/(0.693*(Rdel+1u))}
.Param Gdlh={Sqrt(Tdelhl/(Tdellh+1p))/Rdel}
.Param Gdhl={Tdellh/(Tdelhl+1p)*Gdlh}
*
Rinp inp gnd 1G
Rinm inm gnd 1G
Gthr gnd thr Value= { IF ( V(out,gnd) < {VoutM}, {VthH}, {VthL}) }
Rthr gnd thr 1
Gout gnd out Value= { IF ( (V(inp,inm) > V(thr,gnd)), (VoutH - V(out,gnd))*Gdlh, (VoutL - V(out,gnd))*Gdhl ) }
Cout out gnd {Cout}
.ENDS

.SUBCKT HYSTCOMPE_THL inp inm out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N
*
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) }
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Cout={Sqrt(Tdelhl*Tdellh)/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt(Tdelhl/(Tdellh+1p))}
.Param Rdhl={Tdelhl/(Tdellh+1p)*Rdlh}
*
Rinp inp gnd 1G
Rinm inm gnd 1G
Ethr thr gnd Value= { IF ( V(out,gnd) < {VoutM}, {VthH}, {VthL}) }
Eout out gnd Value= { IF ( (V(inp,inm) > V(thr,gnd)) , VoutH + Rdlh*I(Eout) , VoutL + Rdhl*I(Eout)  ) }
Cout out gnd {Cout}
.ENDS
*$
.SUBCKT HYSTCOMP_THLRF inp inm out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Trise=1N Tfall=1N
X1 inp inm out gnd HYSTCOMPE_THLRF Params: Vthres={Vthres} Vhyst={Vhyst} VoutH={VoutH} VoutL={VoutL} 
+ Rout={Rout} Tdlh={Tdlh} Tdhl={Tdhl} Trise={Trise} Tfall={Tfall}
.ENDS

.SUBCKT HYSTCOMPG_THLRF inp inm out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Trise=1N Tfall=1N
* Trise ->   90%*(VoutH-VoutL), Tfall -> 10%*(VoutH-VoutL)
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) }
.Param Ro = {IF ( ((Trise > 1E-15)|(Tfall > 1E-15)) & (Rout < 1), 1, Rout ) } 
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Tdmin= 1p
.Param Cdel={Sqrt((Tdelhl+Tdmin)*(Tdellh+Tdmin))/(0.693*(Rdel+1u))}
.Param Gdlh={Sqrt((Tdelhl+Tdmin)/(Tdellh+Tdmin))/Rdel}
.Param Gdhl={(Tdellh+Tdmin)/(Tdelhl+Tdmin)*Gdlh}

.Param Cout={Sqrt(Tfall*Trise)/(2.287*(Ro+1u))}
.Param Gr={Sqrt(Tfall/(Trise+Tdmin))/Ro}
.Param Gf={(Trise+Tdmin)/Tfall*Gr}
Rinp inp gnd 1G
Rinm inm gnd 1G
Gthr gnd thr Value= { IF ( V(out,gnd) < {VoutM}, {VthH}, {VthL}) }
Rthr gnd thr 1
Gouti gnd outi Value= { IF ( (V(inp,inm) > V(thr,gnd)), (VoutH - V(outi,gnd))*Gdlh, (VoutL - V(outi,gnd))*Gdhl ) }
Couti outi gnd {Cdel}
Gout gnd out Value= { IF ( (V(outi, gnd) > VoutM), (VoutH - V(out,gnd))*Gr, (VoutL - V(out,gnd))*Gf ) }
Cout out gnd {Cout}
.ENDS

.SUBCKT HYSTCOMPE_THLRF inp inm out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Trise=1N Tfall=1N
* Trise ->   90%*(VoutH-VoutL), Tfall -> 10%*(VoutH-VoutL)
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) }
.Param Ro = {IF ( ((Trise > 1E-15)|(Tfall > 1E-15)) & (Rout < 1), 1, Rout ) } 
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Tdmin= 1p
.Param Cdel={Sqrt((Tdelhl+Tdmin)*(Tdellh+Tdmin))/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt((Tdelhl+Tdmin)/(Tdellh+Tdmin))}
.Param Rdhl={(Tdelhl+Tdmin)/(Tdellh+Tdmin)*Rdlh}

.Param Cout={Sqrt(Tfall*Trise)/(2.287*(Ro+1u))}
.Param Rr={Ro/Sqrt(Tfall/(Trise+Tdmin))}
.Param Rf={Tfall/(Trise+Tdmin)*Rr}
Rinp inp gnd 1G
Rinm inm gnd 1G
Ethr thr gnd Value= { IF ( V(outi,gnd) < {VoutM}, {VthH}, {VthL}) }
Eouti outi gnd Value= { IF ( (V(inp,inm) > V(thr,gnd)), VoutH + Rdlh*I(Eouti) , VoutL + Rdhl*I(Eouti)  ) }
Couti outi gnd {Cdel}
Eout out gnd Value= { IF ( (V(outi, gnd) > VoutM), VoutH + Rr*I(Eout) , VoutL + Rf*I(Eout)  ) }
Cout out gnd {Cout}
.ENDS

.SUBCKT HYSTCOMP_EN INP INM EN OUT GND 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdel=1N Venthres=0.5
*
.Param Delay = {MAX(Tdel,MinADel)}
.Param Rdel = {IF ( (Delay > 1E-15) & (Rout < 1), 1, Rout ) }
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Cout={Delay/(0.693*(Rdel+1u))}
*
Rinp inp gnd 1G
Rinm inm gnd 1G
Ethr thr gnd Value= { IF ( V(out,gnd) < {VoutM}, {VthH}, {VthL}) }
Eout out gnd Value= { IF ( (V(inp,inm) > V(thr,gnd)) | (V(en,gnd) < Venthres) , VoutH + Rdel*I(Eout) , VoutL + Rdel*I(Eout)  ) }
Cout out gnd {Cout}
.ENDS

.SUBCKT HYSTCOMP_RES inp inm res out GND
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Vresthres=0.5
*
.Param Rdel = {IF ( ((Tdlh > 1E-15)|(Tdhl > 1E-15)) & (Rout < 1), 1, Rout ) } 
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Cout={Sqrt(Tdhl*Tdlh)/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt(Tdhl/(Tdlh+1p))}
.Param Rdhl={Tdhl/(Tdlh+1p)*Rdlh}
*
Rinp inp gnd 1G
Rinm inm gnd 1G
Ethr thr gnd Value= { IF ( V(out,gnd) < {VoutM}, {VthH}, {VthL}) }
Eout out gnd Value= { IF ( (V(res,gnd) < Vresthres), IF ( (V(inp,inm) > V(thr,gnd)), VoutH + Rdlh*I(Eout) , VoutL + Rdhl*I(Eout) ),
+ IF ( (V(inp,inm) > V(thr,gnd)), VoutH + 1u*Rdlh*I(Eout) , VoutL + 1u*Rdhl*I(Eout)  ) ) }
Cout out gnd {Cout}
.ENDS

.SUBCKT HYSTCOMP_THL_EN inp inm en out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Venthres=0.5
X1 inp inm en out gnd HYSTCOMPE_THL_EN Params: Vthres={Vthres} Vhyst={Vhyst} VoutH={VoutH} VoutL={VoutL}
+ Rout={Rout} Tdlh={Tdlh} Tdhl={Tdhl} Venthres={Venthres}
.ENDS

.SUBCKT HYSTCOMPG_THL_EN inp inm en out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Venthres=0.5
*
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) }
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Cout={Sqrt(Tdelhl*Tdellh)/(0.693*(Rdel+1u))}
.Param Gdlh={Sqrt(Tdelhl/(Tdellh+1p))/Rdel}
.Param Gdhl={Tdellh/(Tdelhl+1p)*Gdlh}
*
Rinp inp gnd 1G
Rinm inm gnd 1G
Gthr gnd thr Value= { IF ( V(out,gnd) < {VoutM}, {VthH}, {VthL}) }
Rthr gnd thr 1
Gout gnd out Value= { IF ( (V(inp,inm) > V(thr,gnd)) & (V(en,gnd) > Venthres) , 
+ (VoutH - V(out,gnd))*Gdlh, (VoutL - V(out,gnd))*Gdhl ) }
Cout out gnd {Cout}
.ENDS

.SUBCKT HYSTCOMPE_THL_EN inp inm en out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Venthres=0.5
*
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) }
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Cout={Sqrt(Tdelhl*Tdellh)/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt(Tdelhl/(Tdellh+1p))}
.Param Rdhl={Tdelhl/(Tdellh+1p)*Rdlh}
*
Rinp inp gnd 1G
Rinm inm gnd 1G
Ethr thr gnd Value= { IF ( V(out,gnd) < {VoutM}, {VthH}, {VthL}) }
Eout out gnd Value= { IF ( (V(inp,inm) > V(thr,gnd)) & (V(en,gnd) > Venthres) , VoutH + Rdlh*I(Eout) , VoutL + Rdhl*I(Eout)  ) }
Cout out gnd {Cout}
.ENDS
*$
.SUBCKT HYSTCOMP_THLRF_EN inp inm en out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Trise=1N Tfall=1N  Venthres=0.5
X1 inp inm en out gnd HYSTCOMPE_THLRF_EN Params: Vthres={Vthres} Vhyst={Vhyst} VoutH={VoutH} VoutL={VoutL}
+ Rout={Rout} Tdlh={Tdlh} Tdhl={Tdhl} Trise={Trise} Tfall={Tfall} Venthres={Venthres}
.ENDS

.SUBCKT HYSTCOMPG_THLRF_EN inp inm en out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Trise=1N Tfall=1N Venthres=0.5
* Trise ->   90%*(VoutH-VoutL), Tfall -> 10%*(VoutH-VoutL)
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) }
.Param Ro = {IF ( ((Trise > 1E-15)|(Tfall > 1E-15)) & (Rout < 1), 1, Rout ) } 
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Tdmin= 1p
.Param Cdel={Sqrt((Tdelhl+Tdmin)*(Tdellh+Tdmin))/(0.693*(Rdel+1u))}
.Param Gdlh={Sqrt((Tdelhl+Tdmin)/(Tdellh+Tdmin))/Rdel}
.Param Gdhl={(Tdellh+Tdmin)/(Tdelhl+Tdmin)*Gdlh}

.Param Cout={Sqrt(Tfall*Trise)/(2.287*(Ro+1u))}
.Param Gr={Sqrt(Tfall/(Trise+Tdmin))/Ro}
.Param Gf={(Trise+Tdmin)/Tfall*Gr}
Rinp inp gnd 1G
Rinm inm gnd 1G
Gthr gnd thr Value= { IF ( V(out,gnd) < {VoutM}, {VthH}, {VthL}) }
Rthr gnd thr 1
Gouti gnd outi Value= { IF ( (V(inp,inm) > V(thr,gnd)) & (V(en,gnd) > Venthres) , 
+ (VoutH - V(outi,gnd))*Gdlh, (VoutL - V(outi,gnd))*Gdhl ) }
Couti outi gnd {Cdel}
Gout gnd out Value= { IF ( (V(outi, gnd) > VoutM) & (V(en,gnd) > Venthres) , (VoutH - V(out,gnd))*Gr, (VoutL - V(out,gnd))*Gf ) }
Cout out gnd {Cout}
.ENDS

.SUBCKT HYSTCOMPE_THLRF_EN inp inm en out gnd 
+ Params: Vthres=0 Vhyst=1 VoutH=5 VoutL=0 Rout=1 Tdlh=1N Tdhl=1N Trise=1N Tfall=1N Venthres=0.5
* Trise ->   90%*(VoutH-VoutL), Tfall -> 10%*(VoutH-VoutL)
.PARAM Tdellh = {MAX(Tdlh,MinADel)}
.PARAM Tdelhl = {MAX(Tdhl,MinADel)}
.Param Rdel = {IF ( ((Tdellh > 1E-15)|(Tdelhl > 1E-15)) & (Rout < 1), 1, Rout ) }
.Param Ro = {IF ( ((Trise > 1E-15)|(Tfall > 1E-15)) & (Rout < 1), 1, Rout ) } 
.Param VoutM={(VoutH+VoutL)/2}
.Param VthH={Vthres+Vhyst}
.Param VthL={Vthres-Vhyst}
.Param Tdmin= 1p
.Param Cdel={Sqrt((Tdelhl+Tdmin)*(Tdellh+Tdmin))/(0.693*(Rdel+1u))}
.Param Rdlh={Rdel/Sqrt((Tdelhl+Tdmin)/(Tdellh+Tdmin))}
.Param Rdhl={(Tdelhl+Tdmin)/(Tdellh+Tdmin)*Rdlh}

.Param Cout={Sqrt(Tfall*Trise)/(2.287*(Ro+1u))}
.Param Rr={Ro/Sqrt(Tfall/(Trise+Tdmin))}
.Param Rf={Tfall/(Trise+Tdmin)*Rr}
Rinp inp gnd 1G
Rinm inm gnd 1G
Ethr thr gnd Value= { IF ( V(outi,gnd) < {VoutM}, {VthH}, {VthL}) }
Eouti outi gnd Value= { IF ( (V(inp,inm) > V(thr,gnd)) & (V(en,gnd) > Venthres) , VoutH + Rdlh*I(Eouti) , VoutL + Rdhl*I(Eouti)  ) }
Couti outi gnd {Cdel}
Eout out gnd Value= { IF ( (V(outi, gnd) > VoutM) & (V(en,gnd) > Venthres) , VoutH + Rr*I(Eout) , VoutL + Rf*I(Eout)  ) }
Cout out gnd {Cout}
.ENDS

.Subckt CAPR 1 2 Params: C=10u ESR=100M
* C = Capacitance ESR = Equivalent Series Resistance
RS 1 12 {ESR}
C  12  2 {C}
.Ends

.Subckt CAPR_IC 1 2 Params: C=10u ESR=100M IC=0
* C = Capacitance ESR = Equivalent Series Resistance IC = Initial Condition
RS 1 12 {ESR}
C  12  2 {C}   IC={IC}
.Ends

.Subckt CAPNR 1 2 Params: N=1 C=10u ESR=100M
* C = Capacitance ESR = Equivalent Series Resistance
RS 1 12 {ESR/N}
C  12  2 {N*C}   IC={IC}
.Ends

.Subckt CAPNR_IC 1 2 Params: N=1 C=10u ESR=100M IC=0
* C = Capacitance ESR = Equivalent Series Resistance IC = Initial Condition
RS 1 12 {ESR/N}
C  12  2 {N*C}   IC={IC}
.Ends

*Digital I/O model
.model IO_DIG uio (
+	drvh=50	          drvl=50
+	inld=0.0pF        outld=0.0pF
+	AtoD1="AtoD_DIG"   AtoD2="AtoD_DIG"
+	AtoD3="AtoD_DIG"		AtoD4="AtoD_DIG"
+	DtoA1="DtoA_DIG"	  DtoA2="DtoA_DIG"
+	DtoA3="DtoA_DIG"	DtoA4="DtoA_DIG"
+       tswhl1=0.5ns		tswlh1=0.5ns
+       tswhl2=0.5ns		tswlh2=0.5ns
+       tswhl3=0.5ns		tswlh3=0.5ns
+       tswhl4=0.5ns		tswlh4=0.5ns
+	DIGPOWER="DIG_FPWR"	
*tpwrt=2ns
+	)
*$
.subckt AtoD_DIG  A D  DPWR DGND
+	params: CAPACITANCE=0
*
*C1  A DGND {CAPACITANCE}
*X1  DGND A    HC_CLAMP
*X2  A    DPWR HC_CLAMP
*ENORM NORM DGND VALUE={V(A,DGND)/(V(DPWR,DGND)+1U)}
GNORM DGND NORM VALUE={V(A,DGND)/(V(DPWR,DGND)+1U)}
RNORM NORM DGND 1
O0  NORM DGND DO_DIG DGTLNET=D IO_DIG
*O0  A DGND DO_DIG DGTLNET=D IO_DIG
.ends
*$
.model DO_DIG doutput (
+	s0name="0"	s0vlo=-10.0	s0vhi=0.5
+	s2name="1"	s2vlo=0.5	s2vhi=10.0
+	)
*$
.subckt DtoA_DIG  D A  DPWR DGND
+	params: DRVL=0 DRVH=0 CAPACITANCE=0
*
*X2  DGND A    HC_CLAMP
N1  A DGND DPWR DIN_DIG DGTLNET=D IO_DIG_DTOA
*C1  A DGND {CAPACITANCE}
R1  A DGND 1G
.ends

.model IO_DIG_DTOA uio ()

.model DIN_DIG dinput (
+	s0name="0"	s0tsw=1.0ns	s0rlo=50	s0rhi=100K
+	s1name="1"	s1tsw=1.0ns	s1rlo=100K	s1rhi=50
+	s2name="X"	s2tsw=1.0ns	s2rlo=110	s2rhi=100
+	s3name="R"	s3tsw=1.0ns	s3rlo=110	s3rhi=100
+	s4name="F"	s4tsw=1.0ns	s4rlo=110	s4rhi=100
+	s5name="Z"	s5tsw=1.0ns	s5rlo=200K	s5rhi=200K
+	)
*$
.subckt DIGIFPWR  AGND
+	optional: DPWR=$G_DPWR DGND=$G_DGND
+	params:   VOLTAGE=5.0v REFERENCE=0v
*+	params:   VOLTAGE={DOUT_HIGH} REFERENCE=0v
*
VDPWR  DPWR0 DGND  {VOLTAGE}
RDPWR  DPWR0 DPWR  1M
R1     DPWR AGND  1MEG
VDGND  DGND0 AGND  {REFERENCE}
RDGND  DGND0 DGND  1M
R2     DGND AGND  1MEG
.ends

.subckt DIG_FPWR  AGND
+	optional: DPWR=$G_DPWR DGND=$G_DGND
+	params:   VOLTAGE=5.0v REFERENCE=0v
*+	params:   VOLTAGE={DOUT_HIGH} REFERENCE=0v
*
VDPWR  DPWR0 DGND  {VOLTAGE}
RDPWR  DPWR0 DPWR  1M
R1     DPWR AGND  1MEG
VDGND  DGND0 AGND  {REFERENCE}
RDGND  DGND0 DGND  1M
R2     DGND AGND  1MEG
.ends

.subckt DIGIFPWR_NOOPNODE  AGND DPWR DGND
*+	optional: DPWR=$G_DPWR DGND=$G_DGND
+	params:   VOLTAGE=5.0v REFERENCE=0v
*+	params:   VOLTAGE={DOUT_HIGH} REFERENCE=0v
*
X1 AGND DPWR0 DGND0 DIG_FPWR params:   VOLTAGE={VOLTAGE} REFERENCE={REFERENCE}
R1 DPWR0 DPWR 1m
R11   DPWR AGND  1MEG
R2 DGND0 DGND 1m
R21   DGND AGND  1MEG
VNC  G_NC AGND
R3 G_NC $G_NC 1m
R4   $G_NC AGND  1MEG
.ends

*XU1        CSN $G_DGND CLOCK PARAMS: FREQ=100K DUTY=200M OS=1 ES=0 ST=0 RT=10N OutV=5 STSTATE=1
.SUBCKT CLOCK CLK DGND
+ PARAMS: FREQ=1MEG DUTY=0.5 OS=0 ES=1 ST=0 RT=10n OutV=5 STSTATE=0
*.Param TD= {ST+PER/2}
.Param TD= {ST}
.Param TR= {RT}
.Param TF= {RT}
.Param PER= {1/ABS(FREQ+1u)}
.Param PW= {PER*DUTY}
*.Param V1= {OutV*Limit(OS,0,1)}
*.Param V2= {OutV*Limit(ES,0,1)}
.Param V2= {OutV*OS}
.Param V1= {OutV*ES}
 *V1  INITIAL VALUE
 *V2  PULSED VALUE
 *TD  DELAY TIME
 *TR  RISE TIME
 *TF  FALL TIME
 *PW  PULSE WIDTH
 *PER PERIOD
*VP  CLK DGND DC 0 AC 1 0
*VP  CLKA CLKDC DC 0 AC 1 0
VP  CLK CLKDC DC 0 AC 1 0
+ PULSE ( {V1} {V2} {TD} {TR} {TF} {PW} {PER} )
*+ PULSE ( {5} {0} {TD} {TR} {TF} {PW} {PER} )
VP2  CLKDC DGND DC {STSTATE} AC 1 0
+ PULSE ( {-V1*(1-STSTATE)} 0 0 {TR} {TF} 1e11 1e12 )
*XBuf CLKA CLK $G_DPWR DGND AD_BUF_P
.ENDS

.SUBCKT Digital_Source OUT DGND PARAMS: OutV=0
V1 OUTA DGND {OUTV}
*XBuf OUTA OUT $G_DPWR DGND AD_BUF_P 
*+ PARAMS:  IN_LOW={0.475*OutV} IN_HIGH={0.525*OutV}
V2  DPWR DGND {DOUT_HIGH}
XBuf OUTA OUT DPWR DGND AD_BUF_P 
*+ PARAMS:  IN_LOW={0.475*1} IN_HIGH={0.525*1}
+ PARAMS:  IN_LOW={0.475*DOUT_HIGH} IN_HIGH={0.525*DOUT_HIGH}
.ENDS	 

.SUBCKT DIGITAL_HIGH_SOURCE DH DL DPWR GND
XU1 DL DH DPWR GND INV_P
XU2 GND DL DPWR GND AD_BUF_P
.ENDS

.SUBCKT IC_Digital_Low_Source H DGND PARAMS: VL=0
V1 HA DGND {VL}
*XBuf HA H $G_DPWR DGND AD_BUF_P 
*+ PARAMS:  IN_LOW={0.475*VH} IN_HIGH={0.525*VH}
V1  DPWR DGND {DOUT_HIGH}
XBuf HA H DPWR DGND AD_BUF_P 
+ PARAMS:  IN_LOW={0.475*1} IN_HIGH={0.525*1}
.ENDS

.SUBCKT IC_Digital_High_Source H DGND PARAMS: VH=5
V1 HA DGND {VH}
*XBuf HA H $G_DPWR DGND AD_BUF_P 
*+ PARAMS:  IN_LOW={0.475*VH} IN_HIGH={0.525*VH}
V1  DPWR DGND {DOUT_HIGH}
XBuf HA H DPWR DGND AD_BUF_P 
*+ PARAMS:  IN_LOW={0.475*1} IN_HIGH={0.525*1}
+ PARAMS:  IN_LOW={0.475*VH} IN_HIGH={0.525*VH}
.ENDS

.SUBCKT SW_SPST  Sp Sm PARAMS: DCstate=0 Ron=0 Roff=1G
.Param Ron_={Max(Ron,1m)}
.Param Roff_={Max(Roff,1m)}
V_SW1  Cp 0 {DCstate}
S_SW1  Sp Sm Cp 0 SW1
*.model SW1 SW(Ron={Ron} Roff={Roff} Vt=0.5 Vh=0.1)
.model SW1 VSWITCH (Ron={Ron} Roff={Roff} VON=0.6V VOFF=0.4V )
.ENDS

.SUBCKT SW_SPDT  Sm Sp Sp2 PARAMS: DCstate=0 Ron=0 Roff=1G
.Param Ron_={Max(Ron,1m)}
.Param Roff_={Max(Roff,1m)}
V_SW1  Cp 0 {DCstate}
S_SW1  Sp2 Sm Cp 0 SW1
S_SW2  Sp  Sm Cp 0 SW2
*.model SW1 SW(Ron={Roff_} Roff={Ron_} Vt=0.5 Vh=0.1)
*.model SW2 SW(Ron={Ron_} Roff={Roff_} Vt=0.5 Vh=0.1)
.model SW1 VSWITCH (Ron={Ron_} Roff={Roff_} VON=0.4V VOFF=0.6V )
.model SW2 VSWITCH (Ron={Ron_} Roff={Roff_} VON=0.6V VOFF=0.4V )
.ENDS

.SUBCKT TctrlSW Sp Sm Params: DCstate=0 Ron=0 Roff=1G Ton=0 Toff=100n Periodic=0 Period=200n
.Param Trise={Max(Ton, Toff)/1000}
.Param Tdel={Min(Ton, Toff)}
.Param Twidth={Abs(Ton-Toff)}
.Param Per={If(Periodic > 0.5, Period, 1e12)}
.Param V1={If(Ton > Toff, 1, 0)}
.Param Ron_={Max(Ron,1m)}
.Param Roff_={Max(Roff,1m)}
*VP1         3 0 DC {DCSTATE} AC 1 0
*+ PULSE ( {V1} {1-V1} {TDEL} {TRISE} {TRISE} {TWIDTH} {PER} )
VP1         Cp 30 DC 0 AC 1 0
+ PULSE ( {V1} {1-V1} {TDEL} {TRISE} {TRISE} {TWIDTH} {PER} )
VP2         30 0 DC {DCSTATE} AC 1 0
+ PULSE ( {-V1*(1-DCSTATE)} 0 0 {TRISE} {TRISE} 1e11 1e12 )
S_SW1  Sp Sm Cp 0 SW1
*.model SW1 SW(Ron={Ron_} Roff={Roff_} Vt=0.5 Vh=0.1)
.model SW1 VSWITCH (Ron={Ron_} Roff={Roff_} VON=0.6V VOFF=0.4V )
.ENDS

.SUBCKT PULSE P GND
*+ Params: V1=0 V2=1 TD=0 TR=1N TF=1N PW=1U PER=2U
+ Params: V1=0 V2=1 TD=1u TR=1N TF=1N PW=10000 PER=100000 VDC=1
 *V1	 Initial value
 *V2	 Pulsed value
 *TD	 Delay time
 *TR	 Rise time
 *TF	 Fall time
 *PW	 Pulse width
 *PER Period
VP  P Pdc DC 0 AC 1 0
+ PULSE ( {V1-VDC} {V2-VDC} {TD} {TR} {TF} {PW} {PER} )
VPDC Pdc GND {VDC}
.ENDS

*
* Connections:   A
*                |    C
*                |    |
.SUBCKT D_Z      1    2 Params: ZV=5.0 IZV=1.0M
D1 1 2  D_ZM
.MODEL D_ZM D( IS=1p N=0.1 BV={ZV} IBV={IZV} )
.ENDS D_Z

.SUBCKT IC_7442 A B C D O0 O1 O2 O3 O4 O5 O6 O7 O8 O9
U_1   NAND(4) $G_DPWR $G_DGND  48 49 51 54 O9  U_SN7413_1 IO_DIG
U_2   NAND(4) $G_DPWR $G_DGND  47 49 51 54 O8  U_SN7413_1 IO_DIG
U_3   NAND(4) $G_DPWR $G_DGND  48 50 52 53 O7  U_SN7413_1 IO_DIG
U_4   NAND(4) $G_DPWR $G_DGND  47 50 52 53 O6  U_SN7413_1 IO_DIG
U_5   NAND(4) $G_DPWR $G_DGND  48 49 52 53 O5  U_SN7413_1 IO_DIG
U_6   NAND(4) $G_DPWR $G_DGND  47 49 52 53 O4  U_SN7413_1 IO_DIG
U_7   NAND(4) $G_DPWR $G_DGND  48 50 51 53 O3  U_SN7413_1 IO_DIG
U_8   NAND(4) $G_DPWR $G_DGND  47 50 51 53 O2  U_SN7413_1 IO_DIG
U_9   NAND(4) $G_DPWR $G_DGND  48 49 51 53 O1  U_SN7413_1 IO_DIG
U_10  NAND(4) $G_DPWR $G_DGND  47 49 51 53 O0  U_SN7413_1 IO_DIG
U_11  BUF $G_DPWR $G_DGND  D 54  U_SN7407_1 IO_DIG
U_12  BUF $G_DPWR $G_DGND  C 52  U_SN7407_1 IO_DIG
U_13  BUF $G_DPWR $G_DGND  B 50  U_SN7407_1 IO_DIG
U_14  BUF $G_DPWR $G_DGND  A 48  U_SN7407_1 IO_DIG
U_15  INV $G_DPWR $G_DGND  D 53  U_SN7404_1 IO_DIG
U_16  INV $G_DPWR $G_DGND  C 51  U_SN7404_1 IO_DIG
U_17  INV $G_DPWR $G_DGND  B 49  U_SN7404_1 IO_DIG
U_18  INV $G_DPWR $G_DGND  A 47  U_SN7404_1 IO_DIG
.MODEL U_SN7413_1 UGATE( TPLHTY=5N TPHLTY=5N )
.MODEL U_SN7407_1 UGATE( TPLHTY=25N TPHLTY=30N )
.MODEL U_SN7404_1 UGATE( TPLHTY=20N TPHLTY=20N )
.ENDS

.SUBCKT IC_7475_00 1D 2D 1_2C 3D 4D 3_4C 1Q 1Q_Neg 2Q 2Q_Neg 3Q 3Q_Neg 4Q 4Q_Neg
U_DH     INV $G_DPWR $G_DGND  $G_DGND DH  U_SN7404_1 IO_DIG
U_1     DLTCH(1) $G_DPWR $G_DGND
*+       $G_DPWR $G_DPWR 3_4C 4D 4Q 19  U_SN74100_1 IO_DIG  
+       DH DH 3_4C 4D 4Q 19  U_SN74100_1 IO_DIG  
U_2   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 3_4C 3D 3Q 20  U_SN74100_1 IO_DIG  
U_3   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 1_2C 2D 2Q 21  U_SN74100_1 IO_DIG  
U_4   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 1_2C 1D 1Q 22  U_SN74100_1 IO_DIG  
U_5   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 3_4C 18 4Q_Neg 23  U_SN74100_2 IO_DIG  
U_6   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 3_4C 17 3Q_Neg 24  U_SN74100_2 IO_DIG  
U_7   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 1_2C 16 2Q_Neg 25  U_SN74100_2 IO_DIG  
U_8   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 1_2C 15 1Q_Neg 26  U_SN74100_2 IO_DIG  
U_9   INV $G_DPWR $G_DGND  4D 18  U_SN7404_1 IO_DIG
U_10  INV $G_DPWR $G_DGND  3D 17  U_SN7404_1 IO_DIG
U_11  INV $G_DPWR $G_DGND  2D 16  U_SN7404_1 IO_DIG
U_12  INV $G_DPWR $G_DGND  1D 15  U_SN7404_1 IO_DIG
*.MODEL U_SN74100_1 UGFF( TPDQLHTY=0 TPDQHLTY=0 )
*.MODEL U_SN74100_2 UGFF( TPDQLHTY=0 TPDQHLTY=0 )
.MODEL U_SN74100_1 UGFF( TPDQLHTY=27n TPDQHLTY=17n TPGQLHTY=27n TPGQHLTY=25n )
.MODEL U_SN74100_2 UGFF( TPDQLHTY=20n TPDQHLTY=15n TPGQLHTY=30n TPGQHLTY=15n )
.MODEL U_SN7404_1 UGATE( TPLHTY=0 TPHLTY=0 )
.ENDS

.SUBCKT IC_7475 1D 2D 1_2C 3D 4D 3_4C 1Q 1Q_Neg 2Q 2Q_Neg 3Q 3Q_Neg 4Q 4Q_Neg
U_DH     INV $G_DPWR $G_DGND  $G_DGND DH  U_SN7404_1 IO_DIG
U_1     DLTCH(1) $G_DPWR $G_DGND
+       DH DH 3_4C 4D 4Q 4Q_Neg  U_SN74100_1 IO_DIG  
U_2   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 3_4C 3D 3Q 3Q_Neg  U_SN74100_1 IO_DIG  
U_3   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 1_2C 2D 2Q 2Q_Neg  U_SN74100_1 IO_DIG  
U_4   DLTCH(1) $G_DPWR $G_DGND
+       DH DH 1_2C 1D 1Q 1Q_Neg  U_SN74100_1 IO_DIG  
*.MODEL U_SN74100_1 UGFF( TPDQLHTY=0 TPDQHLTY=0 )
.MODEL U_SN74100_1 UGFF( TPDQLHTY=27n TPDQHLTY=17n TPGQLHTY=27n TPGQHLTY=25n )
.MODEL U_SN7404_1 UGATE( TPLHTY=0 TPHLTY=0 )
.ENDS

.SUBCKT IC_74HC157 1A 1B 2A 2B 3A 3B 4A 4B G_Neg A_Neg_B 1Y 2Y 3Y 4Y
U_1     OR(2) $G_DPWR $G_DGND  119 120 4Y  U_SN7432_1 IO_DIG
U_2   OR(2) $G_DPWR $G_DGND  117 118 3Y  U_SN7432_1 IO_DIG
U_3   OR(2) $G_DPWR $G_DGND  115 116 2Y  U_SN7432_1 IO_DIG
U_4   OR(2) $G_DPWR $G_DGND  113 114 1Y  U_SN7432_1 IO_DIG
U_5   AND(2) $G_DPWR $G_DGND  4B 112 120  U_SN7408_1 IO_DIG
U_6   AND(2) $G_DPWR $G_DGND  4A 111 119  U_SN7408_1 IO_DIG
U_7   AND(2) $G_DPWR $G_DGND  3B 112 118  U_SN7408_1 IO_DIG
U_8   AND(2) $G_DPWR $G_DGND  3A 111 117  U_SN7408_1 IO_DIG
U_9   AND(2) $G_DPWR $G_DGND  2B 112 116  U_SN7408_1 IO_DIG
U_10  AND(2) $G_DPWR $G_DGND  2A 111 115  U_SN7408_1 IO_DIG
U_11  AND(2) $G_DPWR $G_DGND  1B 112 114  U_SN7408_1 IO_DIG
U_12  AND(2) $G_DPWR $G_DGND  1A 111 113  U_SN7408_1 IO_DIG
U_13  AND(2) $G_DPWR $G_DGND  109 A_Neg_B 112  U_SN7408_1 IO_DIG
U_14  AND(2) $G_DPWR $G_DGND  109 110 111  U_SN7408_1 IO_DIG
U_15  INV $G_DPWR $G_DGND  A_Neg_B 110  U_SN7404_1 IO_DIG
U_16  INV $G_DPWR $G_DGND  G_Neg 109  U_SN7404_1 IO_DIG
.MODEL U_SN7432_1 UGATE( TPLHTY=19N TPHLTY=19N )
.MODEL U_SN7408_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7404_1 UGATE( TPLHTY=0 TPHLTY=0 )
.ENDS

.SUBCKT IC_74163 CLR_Neg LOAD_Neg ENT ENP CLK A B C D RCO QA QB QC QD
U_1   INV $G_DPWR $G_DGND  $G_DGND 85  U_SN7404_1 IO_DIG
U_res STIM(1,1) $G_DPWR $G_DGND CLR_FF IO_DIG
+      0 0
+      6N 1
U_2   BUF $G_DPWR $G_DGND  62 QD  U_SN7407_1 IO_DIG
U_3   BUF $G_DPWR $G_DGND  61 QC  U_SN7407_1 IO_DIG
U_4   BUF $G_DPWR $G_DGND  60 QB  U_SN7407_1 IO_DIG
U_5   BUF $G_DPWR $G_DGND  59 QA  U_SN7407_1 IO_DIG
*U_6   DFF(1) $G_DPWR $G_DGND
*+       85 85 CLK 84 62 89  U_SN7474_1 IO_DIG  
*U_7   DFF(1) $G_DPWR $G_DGND
*+       85 85 CLK 79 61 88  U_SN7474_1 IO_DIG  
*U_8   DFF(1) $G_DPWR $G_DGND
*+       85 85 CLK 74 60 87  U_SN7474_1 IO_DIG  
*U_9   DFF(1) $G_DPWR $G_DGND
*+       85 85 CLK 69 59 86  U_SN7474_1 IO_DIG  
U_6   DFF(1) $G_DPWR $G_DGND
+       85 CLR_FF CLK 84 62 89  U_SN7474_1 IO_DIG  
U_7   DFF(1) $G_DPWR $G_DGND
+       85 CLR_FF CLK 79 61 88  U_SN7474_1 IO_DIG  
U_8   DFF(1) $G_DPWR $G_DGND
+       85 CLR_FF CLK 74 60 87  U_SN7474_1 IO_DIG  
U_9   DFF(1) $G_DPWR $G_DGND
+       85 CLR_FF CLK 69 59 86  U_SN7474_1 IO_DIG  
U_10  OR(2) $G_DPWR $G_DGND  82 83 84  U_SN7432_1 IO_DIG
U_11  AND(2) $G_DPWR $G_DGND  64 D 83  U_SN7408_1 IO_DIG
U_12  XOR $G_DPWR $G_DGND  80 81 82  U__XOR_1 IO_DIG
U_13  AND(4) $G_DPWR $G_DGND  63 59 60 61 81  U_SN7421_1 IO_DIG
U_14  AND(2) $G_DPWR $G_DGND  65 62 80  U_SN7408_1 IO_DIG
U_15  OR(2) $G_DPWR $G_DGND  77 78 79  U_SN7432_1 IO_DIG
U_16  AND(2) $G_DPWR $G_DGND  64 C 78  U_SN7408_1 IO_DIG
U_17  XOR $G_DPWR $G_DGND  75 76 77  U__XOR_1 IO_DIG
U_18  AND(3) $G_DPWR $G_DGND  63 59 60 76  U_SN7411_1 IO_DIG
U_19  AND(2) $G_DPWR $G_DGND  65 61 75  U_SN7408_1 IO_DIG
U_20  OR(2) $G_DPWR $G_DGND  72 73 74  U_SN7432_1 IO_DIG
U_21  AND(2) $G_DPWR $G_DGND  64 B 73  U_SN7408_1 IO_DIG
U_22  XOR $G_DPWR $G_DGND  70 71 72  U__XOR_1 IO_DIG
U_23  AND(2) $G_DPWR $G_DGND  63 59 71  U_SN7408_1 IO_DIG
U_24  AND(2) $G_DPWR $G_DGND  65 60 70  U_SN7408_1 IO_DIG
U_25  OR(2) $G_DPWR $G_DGND  67 68 69  U_SN7432_1 IO_DIG
U_26  AND(2) $G_DPWR $G_DGND  64 A 68  U_SN7408_1 IO_DIG
U_27  XOR $G_DPWR $G_DGND  66 63 67  U__XOR_1 IO_DIG
U_28  AND(2) $G_DPWR $G_DGND  65 59 66  U_SN7408_1 IO_DIG
U_29  AND(2) $G_DPWR $G_DGND  ENT 58 RCO  U_SN7408_2 IO_DIG
U_30  AND(4) $G_DPWR $G_DGND  59 60 61 62 58  U_SN7421_2 IO_DIG
U_31  NOR(2) $G_DPWR $G_DGND  56 57 65  U_SN7402_1 IO_DIG
U_32  NOR(2) $G_DPWR $G_DGND  LOAD_Neg 57 64  U_SN7402_1 IO_DIG
U_33  NOR(2) $G_DPWR $G_DGND  55 57 63  U_SN7402_1 IO_DIG
U_34  INV $G_DPWR $G_DGND  CLR_Neg 57  U_SN7404_2 IO_DIG
U_35  INV $G_DPWR $G_DGND  LOAD_Neg 56  U_SN7404_2 IO_DIG
U_36  NAND(3) $G_DPWR $G_DGND  ENP LOAD_Neg ENT 55  U_SN7410_1 IO_DIG
.MODEL U_SN7404_1 UGATE( TPLHTY=31N TPHLTY=31N )
.MODEL U_SN7407_1 UGATE( TPLHTY=31N TPHLTY=31N )
.MODEL U_SN7474_1 UEFF( TPCLKQLHTY=3N TPCLKQHLTY=3N )
.MODEL U_SN7432_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7408_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U__XOR_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7421_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7411_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7408_2 UGATE( TPLHTY=32N TPHLTY=32N )
.MODEL U_SN7421_2 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7402_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7404_2 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7410_1 UGATE( TPLHTY=0 TPHLTY=0 )
.ENDS

.SUBCKT IC_74164 CLR_Neg CLK A B QA QB QC QD QE QF QG QH
*U_1     INV $G_DPWR $G_DGND  NT_0 195  U_SN7404_1 IO_DIG
U_1     INV $G_DPWR $G_DGND  $G_DGND 195  U_SN7404_1 IO_DIG
U_2   BUF $G_DPWR $G_DGND  193 QH  U_SN7407_1 IO_DIG
U_3   BUF $G_DPWR $G_DGND  192 QG  U_SN7407_1 IO_DIG
U_4   BUF $G_DPWR $G_DGND  191 QF  U_SN7407_1 IO_DIG
U_5   BUF $G_DPWR $G_DGND  190 QE  U_SN7407_1 IO_DIG
U_6   BUF $G_DPWR $G_DGND  189 QD  U_SN7407_1 IO_DIG
U_7   BUF $G_DPWR $G_DGND  188 QC  U_SN7407_1 IO_DIG
U_8   BUF $G_DPWR $G_DGND  187 QB  U_SN7407_1 IO_DIG
U_9   BUF $G_DPWR $G_DGND  186 QA  U_SN7407_1 IO_DIG
U_10  DFF(1) $G_DPWR $G_DGND
+       195 CLR_Neg CLK 192 193 203  U_SN7474_1 IO_DIG  
U_11  DFF(1) $G_DPWR $G_DGND
+       195 CLR_Neg CLK 191 192 202  U_SN7474_1 IO_DIG  
U_12  DFF(1) $G_DPWR $G_DGND
+       195 CLR_Neg CLK 190 191 201  U_SN7474_1 IO_DIG  
U_13  DFF(1) $G_DPWR $G_DGND
+       195 CLR_Neg CLK 189 190 200  U_SN7474_1 IO_DIG  
U_14  DFF(1) $G_DPWR $G_DGND
+       195 CLR_Neg CLK 188 189 199  U_SN7474_1 IO_DIG  
U_15  DFF(1) $G_DPWR $G_DGND
+       195 CLR_Neg CLK 187 188 198  U_SN7474_1 IO_DIG  
U_16  DFF(1) $G_DPWR $G_DGND
+       195 CLR_Neg CLK 186 187 197  U_SN7474_1 IO_DIG  
U_17  DFF(1) $G_DPWR $G_DGND
+       195 CLR_Neg CLK 194 186 196  U_SN7474_1 IO_DIG  
U_18  AND(2) $G_DPWR $G_DGND  A B 194  U_SN7408_1 IO_DIG
.MODEL U_SN7404_1 UGATE( TPLHTY=20N TPHLTY=20N )
.MODEL U_SN7407_1 UGATE( TPLHTY=20N TPHLTY=20N )
.MODEL U_SN7474_1 UEFF( TPCLKQLHTY=10N TPCLKQHLTY=10N )
.MODEL U_SN7408_1 UGATE( TPLHTY=0 TPHLTY=0 )
.ENDS

.SUBCKT IC_74165 SH_LD_Neg CLKINH CLK SER A B C D E F G H QH Q_NegH
U_1     BUF $G_DPWR $G_DGND  161 Q_NegH  U_SN7407_1 IO_DIG
U_2   BUF $G_DPWR $G_DGND  160 QH  U_SN7407_1 IO_DIG
U_3   DFF(1) $G_DPWR $G_DGND
+       170 178 152 159 160 161  U_SN7474_1 IO_DIG  
U_4   DFF(1) $G_DPWR $G_DGND
+       169 177 152 158 159 185  U_SN7474_1 IO_DIG  
U_5   DFF(1) $G_DPWR $G_DGND
+       168 176 152 157 158 184  U_SN7474_1 IO_DIG  
U_6   DFF(1) $G_DPWR $G_DGND
+       167 175 152 156 157 183  U_SN7474_1 IO_DIG  
U_7   DFF(1) $G_DPWR $G_DGND
+       166 174 152 155 156 182  U_SN7474_1 IO_DIG  
U_8   DFF(1) $G_DPWR $G_DGND
+       165 173 152 154 155 181  U_SN7474_1 IO_DIG  
U_9   DFF(1) $G_DPWR $G_DGND
+       164 172 152 153 154 180  U_SN7474_1 IO_DIG  
U_10  DFF(1) $G_DPWR $G_DGND
+       163 171 152 150 153 179  U_SN7474_1 IO_DIG  
U_11  NAND(2) $G_DPWR $G_DGND  149 170 178  U_SN7400_1 IO_DIG
U_12  NAND(2) $G_DPWR $G_DGND  149 169 177  U_SN7400_1 IO_DIG
U_13  NAND(2) $G_DPWR $G_DGND  149 168 176  U_SN7400_1 IO_DIG
U_14  NAND(2) $G_DPWR $G_DGND  149 167 175  U_SN7400_1 IO_DIG
U_15  NAND(2) $G_DPWR $G_DGND  149 166 174  U_SN7400_1 IO_DIG
U_16  NAND(2) $G_DPWR $G_DGND  149 165 173  U_SN7400_1 IO_DIG
U_17  NAND(2) $G_DPWR $G_DGND  149 164 172  U_SN7400_1 IO_DIG
U_18  NAND(2) $G_DPWR $G_DGND  149 163 171  U_SN7400_1 IO_DIG
U_19  NAND(2) $G_DPWR $G_DGND  149 H 170  U_SN7400_1 IO_DIG
U_20  NAND(2) $G_DPWR $G_DGND  149 G 169  U_SN7400_1 IO_DIG
U_21  NAND(2) $G_DPWR $G_DGND  149 F 168  U_SN7400_1 IO_DIG
U_22  NAND(2) $G_DPWR $G_DGND  149 E 167  U_SN7400_1 IO_DIG
U_23  NAND(2) $G_DPWR $G_DGND  149 D 166  U_SN7400_1 IO_DIG
U_24  NAND(2) $G_DPWR $G_DGND  149 C 165  U_SN7400_1 IO_DIG
U_25  NAND(2) $G_DPWR $G_DGND  149 B 164  U_SN7400_1 IO_DIG
U_26  NAND(2) $G_DPWR $G_DGND  149 A 163  U_SN7400_1 IO_DIG
U_27  OR(2) $G_DPWR $G_DGND  162 151 152  U_SN7432_1 IO_DIG
U_28  AND(2) $G_DPWR $G_DGND  SH_LD_Neg CLKINH 151  U_SN7408_1 IO_DIG
U_29  AND(2) $G_DPWR $G_DGND  CLK SH_LD_Neg 162  U_SN7408_2 IO_DIG
U_30  BUF $G_DPWR $G_DGND  SER 150  U_SN7407_1 IO_DIG
U_31  INV $G_DPWR $G_DGND  SH_LD_Neg 149  U_SN7404_1 IO_DIG
.MODEL U_SN7407_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7474_1 UEFF( TPCLKQLHTY=1N TPCLKQHLTY=1N )
.MODEL U_SN7400_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7432_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7408_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7408_2 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7404_1 UGATE( TPLHTY=0 TPHLTY=0 )
.ENDS

.SUBCKT IC_74193 CLR UP DOWN LOAD_Neg A B C D CO_Neg BO_Neg QA QB QC QD
*U_1     INV $G_DPWR $G_DGND  NT_0 238  U_SN7404_1 IO_DIG
U_1     INV $G_DPWR $G_DGND  $G_DGND 238  U_SN7404_1 IO_DIG
U_2   BUF $G_DPWR $G_DGND  216 QD  U_SN7407_1 IO_DIG
U_3   BUF $G_DPWR $G_DGND  214 QC  U_SN7407_1 IO_DIG
U_4   BUF $G_DPWR $G_DGND  212 QB  U_SN7407_1 IO_DIG
U_5   BUF $G_DPWR $G_DGND  210 QA  U_SN7407_1 IO_DIG
U_6   NAND(5) $G_DPWR $G_DGND  210 212 214 216 219 CO_Neg  U_SN7400_1 IO_DIG
U_7   NAND(5) $G_DPWR $G_DGND  218 211 213 215 217 BO_Neg  U_SN7400_1 IO_DIG
U_8   JKFF(1) $G_DPWR $G_DGND
+       223 237 209 238 238 216 217  U_SN7476_1 IO_DIG  
U_9   JKFF(1) $G_DPWR $G_DGND
+       222 236 208 238 238 214 215  U_SN7476_1 IO_DIG  
U_10  JKFF(1) $G_DPWR $G_DGND
+       221 235 207 238 238 212 213  U_SN7476_1 IO_DIG  
U_11  JKFF(1) $G_DPWR $G_DGND
+       220 234 206 238 238 210 211  U_SN7476_1 IO_DIG  
*U_12  NOR(2) $G_DPWR $G_DGND  228 229 209  U_SN7402_1 IO_DIG
*U_13  NOR(2) $G_DPWR $G_DGND  226 227 208  U_SN7402_1 IO_DIG
*U_14  NOR(2) $G_DPWR $G_DGND  224 225 207  U_SN7402_1 IO_DIG
*U_15  NOR(2) $G_DPWR $G_DGND  218 219 206  U_SN7402_1 IO_DIG
U_12  OR(2) $G_DPWR $G_DGND  228 229 209  U_SN7402_1 IO_DIG
U_13  OR(2) $G_DPWR $G_DGND  226 227 208  U_SN7402_1 IO_DIG
U_14  OR(2) $G_DPWR $G_DGND  224 225 207  U_SN7402_1 IO_DIG
U_15  OR(2) $G_DPWR $G_DGND  218 219 206  U_SN7402_1 IO_DIG
U_16  INV $G_DPWR $G_DGND  LOAD_Neg 205  U_SN7404_2 IO_DIG
U_17  INV $G_DPWR $G_DGND  CLR 204  U_SN7404_3 IO_DIG
U_18  AND(2) $G_DPWR $G_DGND  204 233 237  U_SN7408_1 IO_DIG
U_19  AND(2) $G_DPWR $G_DGND  204 232 236  U_SN7408_1 IO_DIG
U_20  AND(2) $G_DPWR $G_DGND  204 231 235  U_SN7408_1 IO_DIG
U_21  AND(2) $G_DPWR $G_DGND  204 230 234  U_SN7408_1 IO_DIG
U_22  NAND(2) $G_DPWR $G_DGND  223 205 233  U_SN7400_2 IO_DIG
U_23  NAND(2) $G_DPWR $G_DGND  222 205 232  U_SN7400_2 IO_DIG
U_24  NAND(2) $G_DPWR $G_DGND  221 205 231  U_SN7400_2 IO_DIG
U_25  NAND(2) $G_DPWR $G_DGND  220 205 230  U_SN7400_2 IO_DIG
U_26  AND(4) $G_DPWR $G_DGND  210 212 214 219 229  U_SN7421_1 IO_DIG
U_27  AND(4) $G_DPWR $G_DGND  218 211 213 215 228  U_SN7421_1 IO_DIG
U_28  AND(3) $G_DPWR $G_DGND  210 212 219 227  U_SN7411_1 IO_DIG
U_29  AND(3) $G_DPWR $G_DGND  218 211 213 226  U_SN7411_1 IO_DIG
U_30  AND(2) $G_DPWR $G_DGND  210 219 225  U_SN7408_1 IO_DIG
U_31  AND(2) $G_DPWR $G_DGND  218 211 224  U_SN7408_1 IO_DIG
U_32  NAND(3) $G_DPWR $G_DGND  D 205 204 223  U_SN7410_1 IO_DIG
U_33  NAND(3) $G_DPWR $G_DGND  C 205 204 222  U_SN7410_1 IO_DIG
U_34  NAND(3) $G_DPWR $G_DGND  B 205 204 221  U_SN7410_1 IO_DIG
U_35  NAND(3) $G_DPWR $G_DGND  A 205 204 220  U_SN7410_1 IO_DIG
U_36  INV $G_DPWR $G_DGND  UP 219  U_SN7404_4 IO_DIG
U_37  INV $G_DPWR $G_DGND  DOWN 218  U_SN7404_4 IO_DIG
.MODEL U_SN7404_1 UGATE( TPLHTY=5N TPHLTY=5N )
.MODEL U_SN7407_1 UGATE( TPLHTY=5N TPHLTY=5N )
.MODEL U_SN7400_1 UGATE( TPLHTY=11N TPHLTY=13N )
.MODEL U_SN7476_1 UEFF( TPCLKQLHTY=9N TPCLKQHLTY=7N )
.MODEL U_SN7402_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7404_2 UGATE( TPLHTY=15N TPHLTY=13N )
.MODEL U_SN7404_3 UGATE( TPLHTY=2N TPHLTY=2N )
.MODEL U_SN7408_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7400_2 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7421_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7411_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7410_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7404_4 UGATE( TPLHTY=0 TPHLTY=0 )
.ENDS

.SUBCKT IC_74244 1G_Neg 1A1 1A2 1A3 1A4 2G_Neg 2A1 2A2 2A3 2A4 1Y1 1Y2 1Y3 1Y4 
+ 2Y1 2Y2 2Y3 2Y4 
U_1     BUF3 $G_DPWR $G_DGND  146 148 2Y4  U_SN74126_1 IO_DIG
U_2   BUF3 $G_DPWR $G_DGND  145 148 2Y3  U_SN74126_1 IO_DIG
U_3   BUF3 $G_DPWR $G_DGND  144 148 2Y2  U_SN74126_1 IO_DIG
U_4   BUF3 $G_DPWR $G_DGND  143 148 2Y1  U_SN74126_1 IO_DIG
U_5   BUF3 $G_DPWR $G_DGND  142 147 1Y4  U_SN74126_1 IO_DIG
U_6   BUF3 $G_DPWR $G_DGND  141 147 1Y3  U_SN74126_1 IO_DIG
U_7   BUF3 $G_DPWR $G_DGND  140 147 1Y2  U_SN74126_1 IO_DIG
U_8   BUF3 $G_DPWR $G_DGND  139 147 1Y1  U_SN74126_1 IO_DIG
U_9   INV $G_DPWR $G_DGND  2G_Neg 148  U_SN7404_1 IO_DIG
U_10  INV $G_DPWR $G_DGND  1G_Neg 147  U_SN7404_1 IO_DIG
U_11  BUF $G_DPWR $G_DGND  2A4 146  U_SN7407_1 IO_DIG
U_12  BUF $G_DPWR $G_DGND  2A3 145  U_SN7407_1 IO_DIG
U_13  BUF $G_DPWR $G_DGND  2A2 144  U_SN7407_1 IO_DIG
U_14  BUF $G_DPWR $G_DGND  2A1 143  U_SN7407_1 IO_DIG
U_15  BUF $G_DPWR $G_DGND  1A4 142  U_SN7407_1 IO_DIG
U_16  BUF $G_DPWR $G_DGND  1A3 141  U_SN7407_1 IO_DIG
U_17  BUF $G_DPWR $G_DGND  1A2 140  U_SN7407_1 IO_DIG
U_18  BUF $G_DPWR $G_DGND  1A1 139  U_SN7407_1 IO_DIG
.MODEL U_SN74126_1 UTGATE( TPLHTY=1N TPHLTY=1N TPZLTY=1N TPZHTY=1N TPLZTY=1N 
+      TPHZTY=1N )
.MODEL U_SN7404_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN7407_1 UGATE( TPLHTY=1N TPHLTY=1N )
.ENDS

.SUBCKT IC_74273 CLR_Neg CLK 1D 2D 3D 4D 5D 6D 7D 8D 1Q 2Q 3Q 4Q 5Q 6Q 7Q 8Q
*U_1     INV $G_DPWR $G_DGND  NT_0 130  U_SN7404_1 IO_DIG
U_1     INV $G_DPWR $G_DGND  $G_DGND 130  U_SN7404_1 IO_DIG
U_2   DFF(1) $G_DPWR $G_DGND
+       130 CLR_Neg CLK 8D 8Q 138  U_SN7474_1 IO_DIG  
U_3   DFF(1) $G_DPWR $G_DGND
+       130 CLR_Neg CLK 7D 7Q 137  U_SN7474_1 IO_DIG  
U_4   DFF(1) $G_DPWR $G_DGND
+       130 CLR_Neg CLK 6D 6Q 136  U_SN7474_1 IO_DIG  
U_5   DFF(1) $G_DPWR $G_DGND
+       130 CLR_Neg CLK 5D 5Q 135  U_SN7474_1 IO_DIG  
U_6   DFF(1) $G_DPWR $G_DGND
+       130 CLR_Neg CLK 4D 4Q 134  U_SN7474_1 IO_DIG  
U_7   DFF(1) $G_DPWR $G_DGND
+       130 CLR_Neg CLK 3D 3Q 133  U_SN7474_1 IO_DIG  
U_8   DFF(1) $G_DPWR $G_DGND
+       130 CLR_Neg CLK 2D 2Q 132  U_SN7474_1 IO_DIG  
U_9   DFF(1) $G_DPWR $G_DGND
+       130 CLR_Neg CLK 1D 1Q 131  U_SN7474_1 IO_DIG  
.MODEL U_SN7404_1 UGATE( TPLHTY=27N TPHLTY=27N )
.MODEL U_SN7474_1 UEFF( TPCLKQLHTY=27N TPCLKQHLTY=27N )
.ENDS

.SUBCKT IC_74373 OC_Neg C 1D 2D 3D 4D 5D 6D 7D 8D 1Q 2Q 3Q 4Q 5Q 6Q 7Q 8Q
U_DH     INV $G_DPWR $G_DGND  $G_DGND DH  U_SN7404_1 IO_DIG
U_1     BUF3 $G_DPWR $G_DGND  128 129 8Q  U_SN74126_1 IO_DIG
U_2   BUF3 $G_DPWR $G_DGND  127 129 7Q  U_SN74126_1 IO_DIG
U_3   BUF3 $G_DPWR $G_DGND  126 129 6Q  U_SN74126_1 IO_DIG
U_4   BUF3 $G_DPWR $G_DGND  125 129 5Q  U_SN74126_1 IO_DIG
U_5   BUF3 $G_DPWR $G_DGND  124 129 4Q  U_SN74126_1 IO_DIG
U_6   BUF3 $G_DPWR $G_DGND  123 129 3Q  U_SN74126_1 IO_DIG
U_7   BUF3 $G_DPWR $G_DGND  122 129 2Q  U_SN74126_1 IO_DIG
U_8   BUF3 $G_DPWR $G_DGND  121 129 1Q  U_SN74126_1 IO_DIG
U_9   DLTCH(1) $G_DPWR $G_DGND
+       DH DH C 8D 128 239  U_SN74100_1 IO_DIG  
U_10  DLTCH(1) $G_DPWR $G_DGND
+       DH DH C 7D 127 240  U_SN74100_1 IO_DIG  
U_11  DLTCH(1) $G_DPWR $G_DGND
+       DH DH C 6D 126 241  U_SN74100_1 IO_DIG  
U_12  DLTCH(1) $G_DPWR $G_DGND
+       DH DH C 5D 125 242  U_SN74100_1 IO_DIG  
U_13  DLTCH(1) $G_DPWR $G_DGND
+       DH DH C 4D 124 243  U_SN74100_1 IO_DIG  
U_14  DLTCH(1) $G_DPWR $G_DGND
+       DH DH C 3D 123 244  U_SN74100_1 IO_DIG  
U_15  DLTCH(1) $G_DPWR $G_DGND
+       DH DH C 2D 122 245  U_SN74100_1 IO_DIG  
U_16  DLTCH(1) $G_DPWR $G_DGND
+       DH DH C 1D 121 246  U_SN74100_1 IO_DIG  
U_17  INV $G_DPWR $G_DGND  OC_Neg 129  U_SN7404_1 IO_DIG
.MODEL U_SN74126_1 UTGATE( TPLHTY=37N TPHLTY=37N TPZLTY=37N TPZHTY=37N TPLZTY=37N 
+      TPHZTY=37N )
.MODEL U_SN74100_1 UGFF( TPDQLHTY=0 TPDQHLTY=0 )
.MODEL U_SN7404_1 UGATE( TPLHTY=0 TPHLTY=0 )
.ENDS

.SUBCKT IC_74688 G_Neg1 P0 P1 P2 P3 P4 P5 P6 P7 Q0 Q1 Q2 Q3 Q4 Q5 Q6 Q7 PeQ_Neg 
U_1   NAND(9) $G_DPWR $G_DGND  90 91 92 93 94 95 96 97 98 PeQ_Neg  U_SN7400_1 IO_DIG
U_2   INV $G_DPWR $G_DGND  G_Neg1 98  U_SN7404_1 IO_DIG
U_3   NXOR $G_DPWR $G_DGND  Q0 P0 97  U_SN5486_1 IO_DIG
U_4   NXOR $G_DPWR $G_DGND  Q1 P1 96  U_SN5486_1 IO_DIG
U_5   NXOR $G_DPWR $G_DGND  Q2 P2 95  U_SN5486_1 IO_DIG
U_6   NXOR $G_DPWR $G_DGND  Q3 P3 94  U_SN5486_1 IO_DIG
U_7   NXOR $G_DPWR $G_DGND  Q4 P4 93  U_SN5486_1 IO_DIG
U_8   NXOR $G_DPWR $G_DGND  Q5 P5 92  U_SN5486_1 IO_DIG
U_9   NXOR $G_DPWR $G_DGND  Q6 P6 91  U_SN5486_1 IO_DIG
U_10  NXOR $G_DPWR $G_DGND  Q7 P7 90  U_SN5486_1 IO_DIG
.MODEL U_SN7400_1 UGATE( TPLHTY=18N TPHLTY=20N )
.MODEL U_SN7404_1 UGATE( TPLHTY=0 TPHLTY=0 )
.MODEL U_SN5486_1 UGATE( TPLHTY=10N TPHLTY=4N )
.ENDS

